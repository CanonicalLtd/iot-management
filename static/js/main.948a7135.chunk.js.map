{"version":3,"sources":["components/Constants.js","components/Messages.js","models/constants.js","models/api.js","components/Utils.js","components/Navigation.js","components/NavigationUser.js","components/Header.js","components/Footer.js","components/AlertBox.js","components/Accounts.js","components/AccountEdit.js","components/DialogBox.js","components/Users.js","components/UserEdit.js","components/If.js","components/Device.js","components/Devices.js","components/Register.js","components/RegisterEdit.js","components/Pagination.js","components/SnapDialogBox.js","components/DeviceSnaps.js","components/Groups.js","components/Actions.js","components/GroupEdit.js","components/Index.js","App.js","index.js"],"names":["Role","Standard","Admin","Superuser","Status","1","2","3","Messages","account-name-desc","account-code-desc","accounts","actions","active","address","brand","brand-desc","cancel","close","code","confirm-snap-install","confirm-user-delete","copy-device-key","country","country-desc","created","current-time","delete-user","description","device-detail","device-name-desc","devices","devices-connected","devices-excluded","disabled","edit-account","edit-device","edit-group","edit-user","email","enrolled","error-auth-device","error-no-auth","error-no-permissions","error-account-invalid","error-user-invalid","firmware-version","group-desc","groups","hardware-version","id","identity","info","install-on-device","install-snap","installed-snaps","kernel-version","key","last-update","loading","model","model-desc","modified","name","new-account","new-device","new-group","new-user","no-accounts","no-devices","no-devices-connected","no-groups","no-users","ok","on-classic","os-version","refresh","refresh-snap-list","reg-date","register","register-desc","register-devices","registered","remove","role","save","search-store","serial","serial-desc","series","settings","serial-number","site-description","snap","snap-store","snaps","software-version","status","summary","system-info","utc-offset","timezone","title","toggle-status","update","uptime","user-email-desc","user-not-found","user-name-desc","user-username-desc","username","users","version","view-settings","waiting","yes","API_PREFIX","Constants","baseUrl","window","location","protocol","hostname","port","service","query","cancelCallback","axios","get","constants","getToken","getAuthToken","accountsList","accountsNew","post","accountsGet","accountsUpdate","put","accountsForUsers","accountsUpdateForUser","userId","accountId","groupsList","account","groupsGet","groupsGetDevices","groupsGetDevicesExcluded","groupsCreate","orgid","groupsUpdate","nameFrom","nameTo","groupsDeviceLink","deviceId","groupsDeviceUnlink","delete","snapsList","device","snapsInstallRefresh","snapsRemove","snapsInstall","snapsUpdate","action","snapsSettings","snapsSettingsUpdate","storeSearch","snapName","clientsList","clientsGet","clientsNew","clientsDeviceObject","clientsUpdate","devicesUpdate","accountCode","devicesList","devicesGet","usersList","usersNew","usersGet","usersUpdate","usersDelete","subLinks","T","message","parseRoute","parts","pathname","split","length","section","sectionId","subsection","isLoggedIn","token","isUser","isUserStandard","isUserAdmin","isUserSuperuser","roleAsString","str","formatError","data","saveAccount","sessionStorage","setItem","getAccount","getItem","linksStandard","linksAdmin","linksSuperuser","Navigation","l","this","props","links","_this","react_default","a","createElement","className","map","href","link","Component","NavigationUser","handleAccountChange","e","preventDefault","target","value","filter","onAccountChange","_this2","selectedAccount","onChange","selected","renderAccounts","renderUser","renderUserLogout","Header","src","alt","onClick","handleToggleMenu","width","components_Navigation","components_NavigationUser","Footer","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","getVersion","api","then","response","setState","AlertBox","c","type","Accounts","items","renderRows","isSuperuser","components_AlertBox","aria-hidden","renderTable","AccountEdit","handleChangeCode","handleChangeName","handleChangeCountry","handleSaveClick","catch","error","hideForm","setTitle","organization","htmlFor","placeholder","DialogBox","handleCancelClick","handleYesClick","Users","handleDelete","confirmDelete","getAttribute","handleDeleteUser","user","handleDeleteUserCancel","handleClickAccount","parseInt","getAccountsForUser","showAccounts","showAccountsId","getUsers","_this3","organizations","concat","data-key","components_DialogBox","_this4","renderActions","data-user","item","_this5","style","acc","data-account","data-username","colSpan","UserEdit","handleChangeUsername","handleChangeEmail","handleChangeRole","getUser","If","_ref","cond","children","Array","isArray","callback","Device","d","client","moment","lastRefresh","format","osId","osVersionId","kernelVersion","onClassic","Devices","m","start","end","duration","diff","asMinutes","registrationId","getAge","Register","copyToClipboard","el","document","body","appendChild","select","execCommand","removeChild","s","deviceKey","substr","getStatus","statusOptions","RegisterEdit","handleChangeBrand","handleChangeModel","handleChangeSerial","handleChangeStatus","statusTo","getDevice","enrollment","Pagination","pageUp","pages","calculatePages","page","signalPageChange","pageDown","maxRecords","pageSize","startRow","pageChange","displayRows","renderPaging","PAGELENGTH","SnapDialogBox","handleSearchChange","handleKeyPress","handleSearchStore","searchStore","handleInstall","handleInstallClick","handleRecordsForPage","endRow","loadingSearch","_embedded","messageType","slice","snap_id","package_name","developer_name","filesize","binary_filesize","onKeyPress","components_Pagination","renderSnaps","DeviceSnaps","handleRefreshList","showInstall","handleSnapInstall","handleSnapOnChange","handleRefresh","handleToggle","findSnap","handleRemove","handleDialogCancel","handleShowSettings","snapSettings","config","JSON","stringify","parse","handleSettingsChange","handleSettingsUpdate","components_SnapDialogBox","handleTextChange","rows","tableWidth","hide","channel","renderSettings","renderShowInstall","Groups","handleGroupClick","devicesExcluded","handleAddToGroup","handleRemoveFromGroup","getGroupDevices","getGroupExcludedDevices","excluded","renderRowsGroups","renderRowsDevices","renderTableGroups","renderTableDevices","renderTableDevicesExcluded","Actions","GroupEdit","getGroup","org_id","group","Index","renderError","history","createHistory","App","updateDataForRoute","reg_devices","clients","clientObject","listen","handleNavigation","bind","assertThisInitialized","getAccounts","scrollTo","endpoint","_this6","_this7","accountChanged","r","getRegisteredDevices","getDevices","getClient","getSnaps","getGroups","components_Accounts","components_AccountEdit","components_Users","components_UserEdit","components_Devices","components_DeviceSnaps","components_Device","components_Register","components_RegisterEdit","components_Groups","components_GroupEdit","components_Actions","currentSection","sectionNavLinks","console","log","components_Header","renderSubnav","components_Index","renderDevices","renderRegister","renderGroups","renderUsers","components_Footer","ReactDOM","render","src_App","getElementById","resp","jwt","headers","authorization","jwtDecode"],"mappings":"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","file":"static/js/main.948a7135.chunk.js","sourcesContent":["/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nexport const Role = {\n    Standard: 100,\n    Admin: 200,\n    Superuser: 300,\n}\n\nexport const LoadingImage = '/static/images/ajax-loader.gif'\n\nexport const Status = {\n    1: 'waiting',\n    2: 'enrolled',\n    3: 'disabled',\n}\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default {    \n    'account-name-desc':        'Name of the company',\n    'account-code-desc':        'Account ID from the Ubuntu Store',\n    'accounts':                 'Accounts',\n    'actions':                  'Actions',\n    'active':                   'Active',\n    'address':                  'Address',\n    'brand':                    'Brand',\n    'brand-desc':               'Brand ID from the model assertion',\n    'cancel':                   'Cancel',\n    'close':                    'Close',\n    'code':                     'Code',\n    'confirm-snap-install':     'Enter the snap to install',\n    'confirm-user-delete':      'Confirm user deletion',\n    'copy-device-key':          'Copy device public key to clipboard',\n    'country':                  'Country code',\n    'country-desc':             'SSL certificate country code',\n    'created':                  'Created',\n    'current-time':             'Current Time',\n    'delete-user':              'Delete User',\n    'description':              'Description',\n    'device-detail':            'Device Details',\n    'device-name-desc':         'Unique name of the device',\n    'devices':                  'Devices',\n    'devices-connected':        'Connected Devices',\n    'devices-excluded':         'Not in Group',\n    'disabled':                 'Disabled',\n    'edit-account':             'Edit Account',\n    'edit-device':              'Edit Device Registration',\n    'edit-group':               'Edit Device Group',\n    'edit-user':                'Edit User',\n    'email':                    'Email',\n    'enrolled':                 'Enrolled',\n    'error-auth-device':        'Invalid device',\n    'error-no-auth':            'You do not have permissions to access this site. Please login.',\n    'error-no-permissions':     'You do not have permissions to access this page',\n    'error-account-invalid':    'Invalid Account',\n    'error-user-invalid':       'Invalid User',\n    'firmware-version':         'Firmware Version',\n    'group-desc':               'Name of a device group',\n    'groups':                   'Groups',\n    'hardware-version':         'Hardware Version',\n    'id':                       'ID',\n    'identity':                 'Identity',\n    'info':                     'Info',\n    'install-on-device':        'Install on device',\n    'install-snap':             'Install a snap',\n    'installed-snaps':          'Installed Snaps',\n    'kernel-version':           'Kernel Version',\n    'key':                      'Key',\n    'last-update':              'Last Update',\n    'loading':                  'Loading...',\n    'model':                    'Model',\n    'model-desc':               'Model name from the model assertion',\n    'modified':                 'Modified',\n    'name':                     'Name',\n    'new-account':              'Create New Account',\n    'new-device':               'New Device Registration',\n    'new-group':                'New Device Group',\n    'new-user':                 'Create New User',\n    'no-accounts':              'No accounts registered',\n    'no-devices':               'No devices registered',\n    'no-devices-connected':     'No devices connected',\n    'no-groups':                'No groups registered',\n    'no-users':                 'No users registered',\n    'ok':                       'OK',\n    'on-classic':               'On Classic',\n    'os-version':               'OS Version',\n    'refresh':                  'Refresh',\n    'refresh-snap-list':        'Update installed snaps',\n    'reg-date':                 'Registration Date',\n    'register':                 'Register',\n    'register-desc':            'Devices must be registered with the Identity Service to allow them to connect securely to the cloud services',\n    'register-devices':         'Registered Devices',\n    'registered':               'Registered',\n    'remove':                   'Remove',\n    'role':                     'Role',\n    'save':                     'Save',\n    'search-store':             'search store for snap',\n    'serial':                   'Serial Number',\n    'serial-desc':              'Serial Number from the serial assertion',\n    'series':                   'Series',\n    'settings':                 'Settings',\n    'serial-number':            'Serial Number',\n    'site-description':         'Manage Ubuntu devices connected via the MQTT protocol.',\n    'snap':                     'Snap',\n    'snap-store':               'Snap Store',\n    'snaps':                    'Snaps',\n    'software-version':         'Software Version',\n    'status':                   'Status',\n    'summary':                  'Summary',\n    'system-info':              'System Information',\n    'utc-offset':               'UTC Offset',\n    'timezone':                 'Timezone',\n    'title':                    'Device Management Service',\n    'toggle-status':            'Enable/Disable',\n    'update':                   'Update',\n    'uptime':                   'Uptime',\n    'user-email-desc':          'Email address of the user',\n    'user-not-found':           'You do not have permissions to access this site',\n    'user-name-desc':           'Full name of the user',\n    'user-username-desc':       'Ubuntu SSO name of the user',\n    'username':                 'Username',\n    'users':                    'Users',\n    'version':                  'Version',\n    'view-settings':            'View configuration',\n    'waiting':                  'Waiting',\n    'yes':                      'Yes',\n}\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nconst API_PREFIX = '/v1/'\n\nfunction getBaseURL() {\n    return window.location.protocol + '//' + window.location.hostname + ':' + window.location.port + API_PREFIX;\n}\n\nvar Constants = {\n    baseUrl: getBaseURL()\n}\n\nexport default Constants\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport axios from 'axios'\nimport constants from './constants'\n\nvar service = {\n\n    version: (query, cancelCallback) => {\n        return axios.get(constants.baseUrl + 'version');\n    },\n\n    getToken: () => {\n        return axios.get(constants.baseUrl + 'token')\n    },\n\n    getAuthToken: () => {\n        return axios.get(constants.baseUrl + 'authtoken')\n    },\n\n    accountsList: (query, cancelCallback) => {\n        return axios.get(constants.baseUrl + 'organizations');\n    },\n\n    accountsNew: (query, cancelCallback) => {\n        return axios.post(constants.baseUrl + 'organizations', query);\n    },\n\n    accountsGet: (id, cancelCallback) => {\n        return axios.get(constants.baseUrl + 'organizations/' + id);\n    },\n\n    accountsUpdate: (id, query, cancelCallback) => {\n        return axios.put(constants.baseUrl + 'organizations/' + id, query);\n    },\n\n    accountsForUsers: (username, cancelCallback) => {\n        return axios.get(constants.baseUrl + 'users/' + username + '/organizations');\n    },\n\n    accountsUpdateForUser: (userId, accountId, cancelCallback) => {\n        return axios.post(constants.baseUrl + 'users/' + userId + '/organizations/' + accountId);\n    },\n\n    groupsList: (account, cancelCallback) => {\n        return axios.get(constants.baseUrl + account + '/groups');\n    },\n\n    groupsGet: (account, name, cancelCallback) => {\n        return axios.get(constants.baseUrl + account + '/groups/' + name);\n    },\n\n    groupsGetDevices: (account, name, cancelCallback) => {\n        return axios.get(constants.baseUrl + account + '/groups/' + name + '/devices');\n    },\n\n    groupsGetDevicesExcluded: (account, name, cancelCallback) => {\n        return axios.get(constants.baseUrl + account + '/groups/' + name + '/devices/excluded');\n    },\n\n    groupsCreate: (account, name, cancelCallback) => {\n        return axios.post(constants.baseUrl + account + '/groups', {orgid: account, name: name});\n    },\n\n    groupsUpdate: (account, nameFrom, nameTo, cancelCallback) => {\n        return axios.put(constants.baseUrl + account + '/groups', {orgid: account, nameFrom: nameFrom, nameTo: nameTo});\n    },\n\n    groupsDeviceLink: (account, name, deviceId, cancelCallback) => {\n        return axios.post(constants.baseUrl + account + '/groups/' + name + '/' + deviceId);\n    },\n\n    groupsDeviceUnlink: (account, name, deviceId, cancelCallback) => {\n        return axios.delete(constants.baseUrl + account + '/groups/' + name + '/' + deviceId);\n    },\n\n    snapsList: (account, device, cancelCallback) => {\n        return axios.get(constants.baseUrl + 'device/' + account + '/' + device + '/snaps');\n    },\n    \n    snapsInstallRefresh: (account, device, cancelCallback) => {\n        return axios.post(constants.baseUrl + 'snaps/' + account + '/' + device.device.deviceId + '/list');\n    },\n\n    snapsRemove: (account,device, snap, cancelCallback) => {\n        return axios.delete(constants.baseUrl + 'snaps/' + account + '/' + device.device.deviceId + '/' + snap);\n    },\n\n    snapsInstall: (account, device, snap, cancelCallback) => {\n        return axios.post(constants.baseUrl + 'snaps/' + account + '/' + device.device.deviceId + '/' + snap);\n    },\n\n    snapsUpdate: (account, device, snap, action, cancelCallback) => {\n        return axios.put(constants.baseUrl + 'snaps/' + account + '/' + device.device.deviceId + '/' + snap + '/' + action);\n    },\n\n    snapsSettings: (account, device, snap, cancelCallback) => {\n        return axios.get(constants.baseUrl + 'snaps/' + account + '/' + device.device.deviceId + '/' + snap + '/settings');\n    },\n\n    snapsSettingsUpdate: (account, device, snap, settings, cancelCallback) => {\n        return axios.put(constants.baseUrl + 'snaps/' + account + '/' + device.device.deviceId + '/' + snap + '/settings', settings);\n    },\n\n    storeSearch: (snapName,cancelCallback) => {\n        return axios.get(constants.baseUrl + 'store/snaps/' + snapName);\n    },\n\n    clientsList: (account, query, cancelCallback) => {\n        return axios.get(constants.baseUrl + account + '/register/devices');\n    },\n\n    clientsGet: (account, device, cancelCallback) => {\n        return axios.get(constants.baseUrl + account + '/register/devices/' + device);\n    },\n\n    clientsNew: (account, device, cancelCallback) => {\n        return axios.post(constants.baseUrl + account + '/register/devices', device);\n    },\n\n    clientsDeviceObject: (account, query, cancelCallback) => {\n        return axios.get(constants.baseUrl + account + '/clients/' + query + '/device');\n    },\n\n    clientsUpdate: (account, deviceId, status, cancelCallback) => {\n        return axios.put(constants.baseUrl + account + '/register/devices/' + deviceId, {status: status});\n    },\n\n    devicesUpdate: (account, device, cancelCallback) => {\n        return axios.put(constants.baseUrl + device.accountCode + '/devices/' + device.id, device);\n    },\n\n    devicesList: (account, cancelCallback) => {\n        return axios.get(constants.baseUrl + account + '/devices');\n    },\n\n    devicesGet: (account, id, cancelCallback) => {\n        return axios.get(constants.baseUrl + account + '/devices/' + id);\n    },\n\n    usersList: (query, cancelCallback) => {\n        return axios.get(constants.baseUrl + 'users');\n    },\n\n    usersNew: (query, cancelCallback) => {\n        return axios.post(constants.baseUrl + 'users', query);\n    },\n\n    usersGet: (username, cancelCallback) => {\n        return axios.get(constants.baseUrl + 'users/' + username);\n    },\n\n    usersUpdate: (id, query, cancelCallback) => {\n        return axios.put(constants.baseUrl + 'users/' + id, query);\n    },\n\n    usersDelete: (username, cancelCallback) => {\n        return axios.delete(constants.baseUrl + 'users/' + username);\n    }\n}\n\nexport default service\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Messages from './Messages'\nimport {Role} from './Constants'\nimport jwtDecode from 'jwt-decode'\nimport api from '../models/api';\n\n\n\nconst subLinks = {\n    register: ['register', 'devices'],\n    devices: ['info', 'snaps'],\n    groups: ['groups', 'actions'],\n    actions: ['groups', 'actions'],\n}\n\nexport function T(message) {\n    const msg = Messages[message] || message;\n    return msg\n}\n\n// URL is in the form:\n//  /section\n//  /section/sectionId\n//  /section/sectionId/subsection\nexport function parseRoute() {\n    const parts = window.location.pathname.split('/')\n\n    switch (parts.length) {\n        case 2:\n            return {section: parts[1]}\n        case 3:\n            return {section: parts[1], sectionId: parts[2]}\n        case 4:\n            return {section: parts[1], sectionId: parts[2], subsection: parts[3]}\n        default:\n            return {}\n    }\n}\n\nexport function sectionNavLinks(section, sectionId) {\n    if (section === '') {\n        return;\n    }\n    if ((section === 'devices') && (!sectionId)) {\n        return subLinks['register']\n    }\n    return subLinks[section];\n}\n\nexport function isLoggedIn(token) {\n    return isUserStandard(token)\n}\n\nexport function isUserStandard(token) {\n    return isUser(Role.Standard, token)\n}\n\nexport function isUserAdmin(token) {\n    return isUser(Role.Admin, token)\n}\n\nexport function isUserSuperuser(token) {\n    return isUser(Role.Superuser, token)\n}\n\nexport function roleAsString(role) {\n    var str\n    switch (role) {\n        case Role.Standard:\n            str = \"Standard\"\t\n            break;\n        case Role.Admin:\n            str = \"Admin\"\n            break;\n        case Role.Superuser:\n            str = \"Superuser\"\n            break\n        default:\n            str= \"invalid role\"\n            break;\n    }\n    return str\n}\n\nfunction isUser(role, token) {\n    if (!token) return false\n    if (!token.role) return false\n\n    return (token.role >= role)\n}\n\nexport function getAuthToken(callback) {\n    // Get a fresh token and return it to the callback\n    // The token will be passed to the views\n    api.getAuthToken().then((resp) => {\n\n        var jwt = resp.headers.authorization\n\n        if (!jwt) {\n            callback({})\n            return\n        }\n        var token = jwtDecode(jwt)\n\n        if (!token) {\n            callback({})\n            return\n        }\n        callback(token)\n    })\n}\n\nexport function formatError(data) {\n    var message = T(data.code);\n    if (data.message) {\n        message += ': ' + data.message;\n    }\n    return message;\n}\n\nexport function saveAccount(account) {\n    sessionStorage.setItem('accountCode', account.orgid);\n    sessionStorage.setItem('accountName', account.name);\n}\n\nexport function getAccount() {\n    return {\n        orgid: sessionStorage.getItem('accountCode'),\n        name: sessionStorage.getItem('accountName'),\n    }\n}\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react';\nimport {Role} from './Constants'\nimport {T} from './Utils';\n\nconst linksStandard  = ['devices', 'groups'];\nconst linksAdmin     = ['devices', 'groups', 'accounts'];\nconst linksSuperuser = ['devices', 'groups', 'accounts', 'users'];\n\nclass Navigation extends Component {\n\n    link(l) {\n        if (this.props.sectionId) {\n            // This is the secondary menu\n            return '/' + this.props.section + '/' + this.props.sectionId + '/' + l;\n        } else {\n            return '/' + l;\n        }\n    }\n\n    render() {\n\n        var token = this.props.token\n        var links;\n\n        if (this.props.links) {\n            links = this.props.links;\n        } else {\n            switch(token.role) {\n                case Role.Admin:\n                    links = linksAdmin;\n                    break;\n                case Role.Superuser:\n                    links = linksSuperuser;\n                    break;\n                case Role.Standard:\n                    links = linksStandard\n                    break\n                default:\n                    links = []\n            }\n        }\n\n        return (\n          <ul className=\"p-navigation__links\" role=\"menu\">\n              {links.map((l) => {\n                  var active = '';\n                  if ((this.props.section === l) || (this.props.subsection === l)) {\n                      active = ' active'\n                  }\n                  return (\n                    <li key={l} className={'p-navigation__link' + active} role=\"menuitem\"><a href={this.link(l)}>{T(l)}</a></li>\n                  )\n              })}\n          </ul>\n        );\n    }\n}\n\nexport default Navigation;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react';\nimport {T, isLoggedIn} from './Utils'\n\n\nclass NavigationUser extends Component {\n    handleAccountChange = (e) => {\n        e.preventDefault()\n\n        // Get the account\n        var accountId = e.target.value;\n        var account = this.props.accounts.filter(a => {\n            return a.orgid === accountId\n        })[0]\n\n        this.props.onAccountChange(account)\n    }\n\n    renderAccounts(token) {\n        if (!isLoggedIn(token)) {\n            return <span />\n        }\n\n        if (this.props.accounts.length === 0) {\n            return <span />\n        }\n\n        return (\n            <li className=\"p-navigation__link\">\n                <form id=\"account-form\">\n                    <select value={this.props.selectedAccount.orgid} onChange={this.handleAccountChange}>\n                        {this.props.accounts.map(a => {\n                            return <option key={a.orgid} value={a.orgid} selected={a.orgid===this.props.selectedAccount.orgid}>{a.name}</option>;\n                        })}\n                    </select>\n                </form>\n            </li>\n        )\n    }\n\n    renderUser(token) {\n        if (isLoggedIn(token)) {\n            // The name is undefined if user authentication is off\n            if (token.name) {\n                return (\n                    <li className=\"p-navigation__link\"><a href=\"https://login.ubuntu.com/\" className=\"p-link--external\">{token.name}</a></li>\n                )\n            }\n        } else {\n            return (\n            <li className=\"p-navigation__link\"><a href=\"/login\" className=\"p-link--external\">{T('login')}</a></li>\n            )\n        }\n    }\n\n    renderUserLogout(token) {\n        if (isLoggedIn(token)) {\n            return (\n                <li className=\"p-navigation__link\"><a href=\"/logout\">{T('logout')}</a></li>\n            )\n        }\n    }\n\n    render() {\n\n        var token = this.props.token\n\n        return (\n          <ul className=\"p-navigation__links u-float-right\">\n              {this.renderAccounts(token)}\n              {this.renderUser(token)}\n              {this.renderUserLogout(token)}\n          </ul>\n        );\n    }\n}\n\nexport default NavigationUser;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react';\nimport Navigation from './Navigation';\nimport NavigationUser from './NavigationUser';\n\nclass Header extends Component {\n\n    render() {\n        return (\n            <header className=\"p-navigation p-navigation--dark\" role=\"banner\">\n                <div className=\"row\">\n                  <div className=\"p-navigation__banner\">\n                    <div className=\"p-navigation__logo\">\n                            <div className=\"nav_logo\">\n                                <a className=\"p-navigation__link\" href=\"/\">\n                                    <img className=\"p-navigation__image\" src=\"https://assets.ubuntu.com/v1/eb4e0ae3-iotdevice.svg\" alt=\"IoT Management Service\" />\n                                    &nbsp;\n                                    <h3>IoT Management</h3>\n                                </a>\n                            </div>\n\n                    </div>\n                    <a href=\"#navigation\" className=\"p-navigation__toggle--open\" title=\"menu\" onClick={this.handleToggleMenu}>\n                        <img src=\"/static/images/navigation-menu-plain.svg\" width=\"30px\" alt=\"menu\" />\n                    </a>\n                    <nav className=\"p-navigation__nav\">\n                        <span className=\"u-off-screen\"><a href=\"#navigation\">Jump to site</a></span>\n                        <Navigation section={this.props.section} token={this.props.token} />\n                        <NavigationUser token={this.props.token} \n                            accounts={this.props.accounts} selectedAccount={this.props.selectedAccount}\n                            onAccountChange={this.props.onAccountChange} />\n                    </nav>\n                  </div>\n                </div>\n            </header>\n        )\n    }\n}\n\nexport default Header;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react';\nimport api from '../models/api';\nimport {T} from './Utils';\n\n\nclass Footer extends Component {\n\n  constructor(props) {\n      super(props)\n      this.state = {version: ''};\n\n      this.getVersion();\n  }\n\n  getVersion() {\n    api.version().then(response => {\n        this.setState({version: response.data.version})\n    })\n  }\n\n  render() {\n    return (\n      <footer className=\"spacer\">\n        <div>\n          <p><small>{T('version')}: {this.state.version}</small></p>\n        </div>\n      </footer>\n    );\n  }\n}\n\nexport default Footer;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport React, {Component} from 'react';\n\n\nclass AlertBox extends Component {\n    render() {\n        if (this.props.message) {\n            var c = 'p-notification--';\n            if (this.props.type) {\n                c = c + this.props.type;\n            } else {\n                c = c + 'negative';\n            }\n\n            return (\n                <div className={c}>\n                    <p className=\"p-notification__response\">{this.props.message}</p>\n                </div>\n            );\n        } else {\n            return <span />;\n        }\n    }\n}\n\nexport default AlertBox;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport React, {Component} from 'react';\nimport AlertBox from './AlertBox';\nimport {T, isUserAdmin, isUserSuperuser} from './Utils';\n\nclass Accounts extends Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            message: null,\n            accounts: [],\n        };\n    }\n\n    renderTable(items) {\n        \n        if (items.length > 0) {\n            return (\n            <div>\n                <table>\n                <thead>\n                    <tr>\n                    <th>{T('code')}</th><th>{T('name')}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {this.renderRows(items)}\n                </tbody>\n                </table>\n            </div>\n            );\n        } else {\n            return (\n            <p>{T('no-accounts')}</p>\n            );\n        }\n    }\n\n    renderRows(items) {\n        return items.map((l) => {\n          let isSuperuser = isUserSuperuser(this.props.token);\n          return (\n            <tr key={l.id}>\n                <td>{isSuperuser ? <a href={'/accounts/' + l.orgid}>{l.orgid}</a> : l.orgid}</td>\n                <td>{l.name}</td>\n            </tr>\n          );\n        });\n    }\n\n    render () {\n\n        if (!isUserAdmin(this.props.token)) {\n            return (\n                <div className=\"row\">\n                <AlertBox message={T('error-no-permissions')} />\n                </div>\n            )\n        }\n        let isSuperuser = isUserSuperuser(this.props.token);\n\n        return (\n            <div className=\"row\">\n                <section className=\"row\">\n                    <div>\n                        <h2>{T('accounts')}\n                            {isSuperuser ?\n                                <div className=\"u-float-right\">\n                                    <a href=\"/accounts/new\" className=\"p-button--brand\" title={T('new-account')}>\n                                        <i className=\"fa fa-plus\" aria-hidden=\"true\" />\n                                    </a>\n                                </div>\n                                : ''\n                            }\n                        </h2>\n                    </div>\n                    <div className=\"col-12\">\n                        <AlertBox message={this.state.message} />\n                    </div>\n                </section>\n\n                <section className=\"row\">\n                    {this.renderTable(this.props.accounts)}\n                </section>\n            </div>\n        )\n    }\n\n}\n\nexport default Accounts;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport React, {Component} from 'react';\nimport api from '../models/api';\nimport AlertBox from './AlertBox';\nimport {T, isUserSuperuser, formatError} from './Utils';\n\nclass AccountEdit extends Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            title: null,\n            error: null,\n            hideForm: false,\n            account: {active: true},\n            country: '',\n        };\n    }\n\n    componentDidMount() {\n\n        if (this.props.id) {\n            this.setTitle('edit-account');\n            this.getAccount(this.props.id);\n        } else {\n            this.setTitle('new-account');\n        }\n    }\n\n    getAccount(id) {\n        api.accountsGet(id).then(response => {\n            this.setState({account: response.data.organization});\n        })\n        .catch((e) => {\n            this.setState({error: formatError(e.response.data), hideForm: true});\n        })\n    }\n\n    setTitle(title) {\n        this.setState({title: T(title)});\n    }\n\n    handleChangeCode = (e) => {\n        var account = this.state.account;\n        account['orgid'] = e.target.value;\n        this.setState({account: account});\n    }\n\n    handleChangeName = (e) => {\n        var account = this.state.account;\n        account['name'] = e.target.value;\n        this.setState({account: account});\n    }\n\n    handleChangeCountry = (e) => {\n        this.setState({country: e.target.value});\n    }\n\n    handleSaveClick = (e) => {\n        e.preventDefault();\n\n        if (this.props.id) {\n            api.accountsUpdate(this.props.id, this.state.account).then(response => {\n                window.location = '/accounts';\n            })\n            .catch(e => {\n                this.setState({error: formatError(e.response.data), hideForm: false});\n            })\n        } else {\n            api.accountsNew(this.state.account).then(response => {\n                window.location = '/accounts';\n            })\n            .catch(e => {\n                this.setState({error: formatError(e.response.data), hideForm: false});\n            })\n        }\n    }\n\n    render() {\n        if (!isUserSuperuser(this.props.token)) {\n            return (\n                <div className=\"row\">\n                <AlertBox message={T('error-no-permissions')} />\n                </div>\n            )\n        }\n\n        if (this.state.hideForm) {\n            return (\n                <div className=\"row\">\n                <AlertBox message={this.state.error} />\n                </div>\n            )\n        }\n\n        if ((this.props.id) && (!this.state.account.orgid)) {\n            return <div />\n        }\n\n        return (\n            <div className=\"row\">\n                <section className=\"row\">\n                    <h2>{this.state.title}</h2>\n\n                    <AlertBox message={this.state.error} />\n\n                    <form>\n                        <fieldset>\n                            {this.props.id ?\n                                <label htmlFor=\"code\">{T('code')}:\n                                    <input type=\"text\" id=\"code\" disabled=\"disabled\"\n                                           value={this.state.account.orgid} onChange={this.handleChangeCode}/>\n                                </label>\n                                : ''\n                            }\n                            <label htmlFor=\"name\">{T('name')}:\n                                <input type=\"text\" id=\"name\" placeholder={T('account-name-desc')}\n                                    value={this.state.account.name} onChange={this.handleChangeName}/>\n                            </label>\n                            {!this.props.id ?\n                                <label htmlFor=\"country\">{T('country')}:\n                                    <input type=\"text\" id=\"country\" placeholder={T('country-desc')}\n                                        value={this.state.country} onChange={this.handleChangeCountry}/>\n                                </label>\n                                : ''\n                            }\n                        </fieldset>\n                    </form>\n\n                    <div>\n                        <a href='/accounts' className=\"p-button--neutral\">{T('cancel')}</a>\n                        &nbsp;\n                        <a href='/accounts' onClick={this.handleSaveClick} className=\"p-button--brand\">{T('save')}</a>\n                    </div>\n                </section>\n                <br />\n            </div>\n        )\n\n    }\n}\n\nexport default AccountEdit;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport React, {Component} from 'react';\nimport {T} from './Utils';\n\nclass DialogBox extends Component {\n\n    render() {\n\n        if (this.props.message) {\n            return (\n                <div className=\"p-card warning\">\n                    <p>{this.props.message}</p>\n                    <div>\n                        <button onClick={this.props.handleCancelClick} className=\"p-button--neutral small\">\n                            {T('cancel')}\n                        </button>\n                        <button onClick={this.props.handleYesClick} className=\"p-button--brand small\">\n                            {T('ok')}\n                        </button>\n                    </div>\n                </div>\n            );\n        } else {\n            return <span />;\n        }\n    }\n}\n\nexport default DialogBox;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react';\nimport api from '../models/api';\nimport AlertBox from './AlertBox';\nimport DialogBox from './DialogBox';\nimport {T, formatError, isUserAdmin, roleAsString} from './Utils';\n\nclass Users extends Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            message: null,\n            users: [],\n            accounts: [],\n            confirmDelete: null,\n            showAccountsId: null,\n        };\n\n        this.getUsers();\n    }\n\n    getUsers () {\n        api.usersList().then(response => {\n            this.setState({users: response.data.users})\n        })\n    }\n\n    getAccountsForUser (username, userId) {\n        api.accountsForUsers(username).then(response => {\n            this.setState({accounts: response.data.organizations, showAccountsId: userId})\n        })\n    }\n\n    handleDelete = (e) => {\n        e.preventDefault();\n        this.setState({confirmDelete: e.target.getAttribute('data-key')});\n    }\n\n    handleDeleteUser = (e) => {\n        e.preventDefault();\n        var users = this.state.users.filter((user) => {\n          return user.username === this.state.confirmDelete;\n        });\n        if (users.length === 0) {\n          return;\n        }\n    \n        api.usersDelete(users[0].username).then(response => {\n            window.location = '/users';\n        })\n        .catch((e) => {\n            this.setState({error: formatError(e.response.data)});\n        })\n    }\n\n    handleDeleteUserCancel = (e) => {\n        e.preventDefault();\n        this.setState({confirmDelete: null});\n    }\n\n    handleClickAccount = (e) => {\n        e.preventDefault();\n        var accountId = e.target.getAttribute('data-account');\n        var userId = parseInt(e.target.getAttribute('data-user'), 10);\n        var username = e.target.getAttribute('data-username');\n\n        api.accountsUpdateForUser(username, accountId).then(response => {\n            this.getAccountsForUser(username, userId)\n        })\n    }\n\n    showAccounts = (e) => {\n        e.preventDefault();\n\n        var id = parseInt(e.target.getAttribute('data-key'), 10);\n        var username = e.target.getAttribute('data-user');\n        if (this.state.showAccountsId === id) {\n            this.setState({showAccountsId: null});\n        } else {\n            this.getAccountsForUser(username, id)\n        }\n    }\n\n    renderTable(items) {\n\n        if (items.length > 0) {\n            return (\n            <div>\n                <table>\n                <thead>\n                    <tr>\n                        <th /><th>{T('username')}</th><th>{T('name')}</th><th>{T('email')}</th><th>{T('role')}</th><th>{T('accounts')}</th>\n                    </tr>\n                </thead>\n                    {this.renderRows(items)}\n                </table>\n            </div>\n            );\n        } else {\n            return (\n            <p>{T('no-users')}</p>\n            );\n        }\n    }\n\n    renderActions(user) {\n        if (user.username !== this.state.confirmDelete) {\n            return (\n                <div>\n                    <a href={'/users/'.concat(user.username)} className=\"p-button--brand small\" title={T('edit-user')}><i className=\"fa fa-edit\" /></a>\n                    &nbsp;\n                    <button onClick={this.handleDelete} data-key={user.username} className=\"p-button--neutral small\" title={T('delete-user')}>\n                        <i className=\"fa fa-trash\" data-key={user.username} /></button>\n                </div>\n            );\n        } else {\n            return (\n                <DialogBox message={T('confirm-user-delete')} handleYesClick={this.handleDeleteUser} handleCancelClick={this.handleDeleteUserCancel} />\n            );\n        }\n    }\n\n    renderRows(items) {\n        return items.map((l) => {\n            var c = \"\";\n            if (l.id === this.state.showAccountsId) {\n            c = 'borderless';\n            }\n            return (\n              <tbody>\n                <tr key={l.id} className={c}>\n                    <td>\n                    {this.renderActions(l)}\n                    </td>\n                    <td className=\"overflow\" title={l.username}>{l.username}</td>\n                    <td className=\"overflow\" title={l.name}>{l.name}</td>\n                    <td className=\"overflow\" title={l.email}>{l.email}</td>\n                    <td className=\"overflow\" title={roleAsString(l.role)}>{roleAsString(l.role)}</td>\n                    <td className=\"overflow\">\n                        <button className=\"p-button--neutral small\" title={T('view-accounts')} data-key={l.id} data-user={l.username} onClick={this.showAccounts}>\n                            <i className=\"fa fa-building\" aria-hidden=\"true\" data-key={l.id} data-user={l.username} />\n                        </button>\n                    </td>\n                </tr>\n                {this.renderAccounts(l)}\n              </tbody>\n            );\n        });\n    }\n    \n    renderAccounts(item) {\n        if (item.id !== this.state.showAccountsId) {\n            return\n        }\n\n        var style;\n        var accounts = this.state.accounts.map(acc => {\n            if (acc.selected) {\n                style = 'p-button--brand';\n            } else {\n                style = 'p-button--neutral';\n            }\n            return (\n                <button key={acc.orgid} data-account={acc.orgid} data-user={item.id} data-username={item.username} onClick={this.handleClickAccount} className={style}>\n                {acc.name}\n                </button>\n            )\n        })\n\n        return (\n            <tr>\n                <td colSpan=\"6\">Select accounts for {item.name}:<br /> {accounts}</td>\n            </tr>\n        )\n    }\n\n    render () {\n        if (!isUserAdmin(this.props.token)) {\n            return (\n                <div className=\"row\">\n                <AlertBox message={T('error-no-permissions')} />\n                </div>\n            )\n        }\n\n        return (\n            <div className=\"row\">\n                <section className=\"row\">\n                    <div>\n                        <h2>{T('users')}\n                            <div className=\"u-float-right\">\n                                <a href=\"/users/new\" className=\"p-button--brand\" title={T('new-user')}>\n                                    <i className=\"fa fa-plus\" aria-hidden=\"true\" />\n                                </a>\n                            </div>\n                        </h2>\n                    </div>\n                    <div className=\"col-12\">\n                        <AlertBox message={this.state.message} />\n                    </div>\n                </section>\n\n                <section className=\"row\">\n                    {this.renderTable(this.state.users)}\n                </section>\n            </div>\n        )\n    }\n}\n\nexport default Users;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react';\nimport api from '../models/api';\nimport AlertBox from './AlertBox';\nimport {T, formatError, isUserSuperuser} from './Utils';\n\nclass UserEdit extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            title: null,\n            user: {},\n            error: null,\n            hideForm: false,\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.username) {\n            this.setTitle('edit-user');\n            this.getUser(this.props.username);\n        } else {\n            this.setTitle('new-user');\n        }\n    }\n\n    setTitle(title) {\n        this.setState({title: T(title)});\n    }\n\n    getUser(userId) {\n        api.usersGet(userId).then((response) => {\n            this.setState({\n                user: response.data.user, \n                hideForm: false,\n            });\n        })\n        .catch((e) => {\n            this.setState({error: formatError(e.response.data)});\n        })\n    }\n\n    handleChangeUsername = (e) => {\n        var user = this.state.user;\n        user.username = e.target.value;\n        this.setState({user: user});\n    }\n\n    handleChangeName = (e) => {\n        var user = this.state.user;\n        user.name = e.target.value;\n        this.setState({user: user});\n    }\n\n    handleChangeEmail = (e) => {\n        var user = this.state.user;\n        user.email = e.target.value;\n        this.setState({user: user});\n    }\n\n    handleChangeRole = (e) => {\n        var user = this.state.user;\n        user.role = parseInt(e.target.value, 10);\n        this.setState({user: user});\n    }\n\n    handleSaveClick = (e) => {\n        e.preventDefault();\n\n        if (this.props.username) {\n            // Update the existing user\n            api.usersUpdate(this.props.username, this.state.user).then(response => {\n                window.location = '/users';\n            })\n            .catch(e => {\n                this.setState({error: formatError(e.response.data), hideForm: false});\n            })\n        } else {\n            // Create a new user\n            api.usersNew(this.state.user).then(response => {\n                window.location = '/users';\n            })\n            .catch(e => {\n                this.setState({error: formatError(e.response.data), hideForm: false});\n            })\n        }\n    }\n\n    renderError() {\n        if (this.state.error) {\n            return (\n                <AlertBox message={this.state.error} />\n            );\n        }\n    }\n\n    render() {\n        if (!isUserSuperuser(this.props.token)) {\n            return (\n                <div className=\"row\">\n                <AlertBox message={T('error-no-permissions')} />\n                </div>\n            )\n        }\n\n        if (this.state.hideForm) {\n            return (\n                <div className=\"row\">\n                <AlertBox message={this.state.error} />\n                </div>\n            )\n        }\n\n        return (\n            <div className=\"row\">\n                <section className=\"row\">\n                      <h2>{this.state.title}</h2>\n\n                        <AlertBox message={this.state.error} />\n\n                        <form>\n                            <fieldset>\n                                <label htmlFor=\"username\">{T('username')}:\n                                    <input type=\"text\" id=\"username\" placeholder={T('user-username-desc')}\n                                        value={this.state.user.username} onChange={this.handleChangeUsername} />\n                                </label>\n                                <label htmlFor=\"name\">{T('name')}:\n                                    <input type=\"text\" id=\"name\" placeholder={T('user-name-desc')}\n                                        value={this.state.user.name} onChange={this.handleChangeName}/>\n                                </label>\n                                <label htmlFor=\"email\">{T('email')}:\n                                    <input type=\"text\" id=\"email\" placeholder={T('user-email-desc')}\n                                        value={this.state.user.email} onChange={this.handleChangeEmail}/>\n                                </label>\n                                <label htmlFor=\"role\">{T('role')}:\n                                    <select value={this.state.user.role} id=\"role\" onChange={this.handleChangeRole}>\n                                        <option />\n                                        <option key=\"standard\" value=\"100\">Standard</option>\n                                        <option key=\"admin\" value=\"200\">Admin</option>\n                                        <option key=\"superuser\" value=\"300\">Superuser</option>\n                                    </select>\n                                </label>\n                            </fieldset>\n                        </form>\n\n                        <div>\n                            <a href='/users' className=\"p-button--neutral\">{T('cancel')}</a>\n                            &nbsp;\n                            <a href='/users' onClick={this.handleSaveClick} className=\"p-button--brand\">{T('save')}</a>\n                        </div>\n                </section>\n                <br />\n            </div>\n        )\n    }\n}\n\nexport default UserEdit;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\n\nexport default function If({ cond, children }) {\n  if (!cond) return null\n  return (\n    Array.isArray(children)\n      ? ( <div>{children}</div> )\n      : children\n  )\n}\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react';\nimport moment from 'moment';\nimport AlertBox from './AlertBox';\nimport If from './If';\nimport {T} from './Utils';\n\nclass Device extends Component {\n\n    render () {\n        var d = this.props.client;\n        if (!d.device) {return <div>Loading...</div>};\n\n        return (\n            <div className=\"row\">\n                <h1 className=\"tight\">{d.device.brand} {d.device.model}</h1>\n                <h4 className=\"subtitle\">{d.device.serial}</h4>\n\n                <section className=\"row spacer\">\n                    <div className=\"col-12\">\n                        <AlertBox message={this.props.message} />\n                    </div>\n                </section>\n\n                <If cond={!this.props.message}>\n                    <section className=\"row spacer\">\n                        <div className=\"p-card--highlighted col-6\">\n                            <table className=\"p-card__content\">\n                                <tbody>\n                                    <tr>\n                                        <td>{T('last-update')}:</td><td>{moment(d.device.lastRefresh).format('llll')}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>{T('registered')}:</td><td>{moment(d.device.created).format('llll')}</td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </section>\n\n                    <section className=\"row spacer\">\n                        <div className=\"p-card\">\n                            <h3 className=\"p-card__title\">{T('system-info')}</h3>\n                            <table className=\"p-card__content\">\n                                <tbody>\n                                    <tr>\n                                        <td>{T('model')}:</td><td>{d.device.brand} {d.device.model}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>{T('serial-number')}:</td><td>{d.device.serial}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>{T('os-version')}:</td><td>{d.device.version.osId} {d.device.version.osVersionId}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>{T('series')}:</td><td>{d.device.version.series}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>{T('version')}:</td><td>{d.device.version.version}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>{T('kernel-version')}:</td><td>{d.device.version.kernelVersion}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>{T('on-classic')}:</td><td>{d.device.version.onClassic ? 'true': 'false'}</td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </section>\n                </If>\n            </div>\n        )\n    }\n}\n\nexport default Device\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport React, {Component} from 'react';\nimport moment from 'moment';\nimport AlertBox from './AlertBox';\nimport {T} from './Utils';\n\n\nclass Devices extends Component {\n\n    getAge(m) {\n        var start = moment(m);\n        var end = moment()\n        var dur = moment.duration(end.diff(start));\n        var d = dur.asMinutes()\n        if (d < 2) {\n            return <i className=\"fa fa-clock led-green\" title={start.format('llll')} />\n        } else if (d < 5) {\n            return <i className=\"fa fa-clock led-orange\" title={start.format('llll')} />\n        } else {\n            return <i className=\"fa fa-clock led-red\" title={start.format('llll')} />\n        }\n    }\n\n    renderTable(items) {\n        if (items.length > 0) {\n            return (\n            <div>\n                <table>\n                <thead>\n                    <tr>\n                    <th>{T('brand')}</th><th>{T('model')}</th><th>{T('serial')}</th><th>{T('reg-date')}</th><th>{T('last-update')}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {this.renderRows(items)}\n                </tbody>\n                </table>\n            </div>\n            );\n        } else {\n            return (\n            <p>{T('no-devices-connected')}</p>\n            );\n        }\n    }\n\n    renderRows(items) {\n        return items.map((l) => {\n          return (\n              <tr key={l.registrationId}>\n                  <td className=\"overflow\"><a href={'/devices/' + l.deviceId+ '/info'}>{l.brand}</a></td>\n                  <td className=\"overflow\"><a href={'/devices/' + l.deviceId+ '/info'}>{l.model}</a></td>\n                  <td className=\"overflow\"><a href={'/devices/' + l.deviceId+ '/info'}>{l.serial}</a></td>\n                  <td className=\"overflow\">{moment(l.created).format('lll')}</td>\n                  <td>\n                      {moment(l.lastRefresh).format('lll')}\n                      &nbsp;\n                      {this.getAge(l.lastRefresh)}\n                  </td>\n              </tr>\n          );\n        });\n    }\n\n    render () {\n        return (\n            <div className=\"row\">\n                <section className=\"row\">\n                    <h2>{T('devices-connected')}</h2>\n                    <div className=\"col-12\">\n                        <AlertBox message={this.props.message} />\n                    </div>\n                </section>\n\n                <section className=\"row spacer\">\n                    {this.renderTable(this.props.devices)}\n                </section>\n            </div>\n        )\n    }\n\n}\n\nexport default Devices;","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react';\nimport AlertBox from './AlertBox';\nimport {T, isUserSuperuser} from './Utils';\nimport {Status} from './Constants';\n\n\nclass Register extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            message: null,\n        };\n    }\n\n    getStatus(s) {\n        let status = T(Status[s])\n        if (s === 1) {\n            return <span><i className=\"fa fa-clock led-orange\" title={status} />&nbsp;{status}</span>\n        } else if (s === 2) {\n            return <span><i className=\"fa fa-clipboard-check led-green\" title={status} />&nbsp;{status}</span>\n        } else {\n            return <span><i className=\"fa fa-times-circle led-red\" title={status} />&nbsp;{status}</span>\n        }\n    }\n\n    copyToClipboard = (e) => {\n        e.preventDefault()\n        const el = document.createElement('textarea');\n        el.value = e.target.getAttribute('data-key');\n        document.body.appendChild(el);\n        el.select();\n        document.execCommand('copy');\n        document.body.removeChild(el);\n    }\n\n    renderTable(items) {\n        \n        if (!items) {\n            return\n        }\n        if (items.length > 0) {\n            return (\n            <div>\n                <table>\n                <thead>\n                    <tr>\n                        <th className=\"small\" /><th>{T('id')}</th><th>{T('brand')}</th><th>{T('model')}</th><th>{T('serial')}</th><th className=\"overflow\">{T('device-key')}</th>\n                        <th className=\"xsmall\">{T('status')}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {this.renderRows(items)}\n                </tbody>\n                </table>\n            </div>\n            );\n        } else {\n            return (\n            <p>{T('no-devices')}</p>\n            );\n        }\n    }\n\n    renderRows(items) {\n        return items.map((l) => {\n          return (\n            <tr key={l.id}>\n                <td>\n                    <a href={'/register/' + l.id} className=\"p-button--neutral small\"><i className=\"fa fa-edit\" /></a>\n                    {l.device.deviceKey ?\n                        <a href=\"\" onClick={this.copyToClipboard} data-key={l.device.deviceKey} className=\"p-button--neutral small\" title={T('copy-device-key')}>\n                        <i className=\"fa fa-clipboard\" data-key={l.device.deviceKey} /></a> : ''}\n                </td>\n                <td className=\"overflow\">{l.id}</td>\n                <td className=\"overflow\">{l.device.brand}</td>\n                <td className=\"overflow\">{l.device.model}</td>\n                <td className=\"overflow\">{l.device.serial}</td>\n                <td className=\"overflow\" title={l.device.deviceKey}>\n                    {(l.device.deviceKey && l.device.deviceKey.substr(0,40)) || ''}\n                </td>\n                <td>{this.getStatus(l.status)}</td>\n            </tr>\n          );\n        });\n    }\n\n    render () {\n        return (\n            <div className=\"row\">\n                <section className=\"row\">\n                    <h2>\n                        {T('register-devices')}\n                        {isUserSuperuser(this.props.token) ?\n                            <div className=\"u-float-right\">\n                                <a href=\"/register/new\" className=\"p-button--brand\" title={T('new-device')}>\n                                    <i className=\"fa fa-plus\" aria-hidden=\"true\" />\n                                </a>\n                            </div>\n                            : ''\n                        }\n                    </h2>\n                    <div className=\"col-12\">\n                        <AlertBox message={this.state.message} />\n                    </div>\n                </section>\n\n                <section className=\"row spacer\">\n                    {this.renderTable(this.props.devices)}\n                </section>\n            </div>\n        )\n    }\n}\n\nexport default Register;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react';\nimport api from '../models/api';\nimport AlertBox from './AlertBox';\nimport {T, isUserAdmin, formatError} from './Utils';\n\n\nconst statusOptions = [{id:1, name:'Waiting'}, {id:2, name:'Enrolled'}, {id:3, name:'Disabled'}]\n\n\nclass RegisterEdit extends Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            title: null,\n            error: null,\n            hideForm: false,\n            deviceId: '',\n            status: 0,\n            statusTo: 0,\n            device: {orgid: this.props.account.orgid},\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.id) {\n            this.setTitle('edit-device');\n            this.getDevice(this.props.id);\n        } else {\n            this.setTitle('new-device');\n        }\n    }\n\n    getDevice(id) {\n        api.clientsGet(this.props.account.orgid, id).then(response => {\n            this.setState({device: response.data.enrollment.device,\n                status: response.data.enrollment.status, statusTo:response.data.enrollment.status,\n                deviceId: response.data.enrollment.id});\n        })\n        .catch((e) => {\n            this.setState({error: formatError(e.response.data), hideForm: true});\n        })\n    }\n\n    setTitle(title) {\n        this.setState({title: T(title)});\n    }\n\n    handleChangeBrand = (e) => {\n        var device = this.state.device;\n        device.brand = e.target.value;\n        this.setState({device: device});\n    }\n\n    handleChangeModel = (e) => {\n        var device = this.state.device;\n        device.model = e.target.value;\n        this.setState({device: device});\n    }\n\n    handleChangeSerial = (e) => {\n        var device = this.state.device;\n        device.serial = e.target.value;\n        this.setState({device: device});\n    }\n\n    handleChangeStatus = (e) => {\n        let status = parseInt(e.target.value, 10);\n        this.setState({statusTo: status});\n    }\n    \n    handleSaveClick = (e) => {\n        e.preventDefault();\n\n        if (this.props.id) {\n            // Update the existing device\n            api.clientsUpdate(this.props.account.orgid, this.state.deviceId, this.state.statusTo).then(response => {\n                window.location = '/register';\n            })\n            .catch(e => {\n                this.setState({error: formatError(e.response.data), hideForm: false});\n            })\n        } else {\n            // Create a new device\n            api.clientsNew(this.props.account.orgid, this.state.device).then(response => {\n                window.location = '/register';\n            })\n            .catch(e => {\n                this.setState({error: formatError(e.response.data), hideForm: false});\n            })\n        }\n    }\n\n    render () {\n        if (!isUserAdmin(this.props.token)) {\n            return (\n                <div className=\"row\">\n                <AlertBox message={T('error-no-permissions')} />\n                </div>\n            )\n        }\n\n        if (this.state.hideForm) {\n            return (\n                <div className=\"row\">\n                <AlertBox message={this.state.error} />\n                </div>\n            )\n        }\n\n        let disabled = this.state.status ? true : false;\n\n        return (\n            <div className=\"row\">\n                <section className=\"row\">\n                    <h2>{this.state.title}</h2>\n                    <div>{T('register-desc')}<br /></div>\n\n                    <AlertBox message={this.state.error} />\n\n                    <form>\n                        <fieldset>\n                            {\n                                this.props.id ?\n                                    <label htmlFor=\"id\">{T('id')}:\n                                        <input type=\"text\" id=\"id\"\n                                               value={this.state.deviceId} disabled={true} />\n                                    </label>\n                                    :\n                                    ''\n                            }\n\n                            <label htmlFor=\"brand\">{T('brand')}:\n                                <input type=\"text\" id=\"brand\" placeholder={T('brand-desc')}\n                                    value={this.state.device.brand} onChange={this.handleChangeBrand} disabled={disabled} />\n                            </label>\n                            <label htmlFor=\"model\">{T('model')}:\n                                <input type=\"text\" id=\"model\" placeholder={T('model-desc')}\n                                       value={this.state.device.model} onChange={this.handleChangeModel} disabled={disabled} />\n                            </label>\n                            <label htmlFor=\"serial\">{T('serial')}:\n                                <input type=\"text\" id=\"serial\" placeholder={T('serial-desc')}\n                                       value={this.state.device.serial} onChange={this.handleChangeSerial} disabled={disabled} />\n                            </label>\n\n                            <label>\n                                {this.state.status > 0 ?\n                                    <select value={this.state.statusTo} onChange={this.handleChangeStatus}>\n                                        {statusOptions.map(a => {\n                                            return <option key={a.id} value={a.id}\n                                                           selected={a.id === this.state.statusTo}>{a.name}</option>;\n                                        })}\n                                    </select>\n                                    :\n                                    ''\n                                }\n                            </label>\n                        </fieldset>\n                    </form>\n\n                    <div>\n                        <a href='/register' className=\"p-button--neutral\">{T('cancel')}</a>\n                        &nbsp;\n                        <a href='/register' onClick={this.handleSaveClick} className=\"p-button--brand\">{T('save')}</a>\n                    </div>\n                </section>\n                <br />\n            </div>\n        )\n\n    }\n}\n\nexport default RegisterEdit;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, { Component } from 'react'\n\nclass Pagination extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      page: 1,\n      query: null,\n      maxRecords: props.pageSize | 5,\n    }\n  }\n\n  pageUp = () => {\n    var pages = this.calculatePages();\n    var page = this.state.page + 1;\n    if (page > pages) {\n        page = pages;\n    }\n    this.setState({page: page});\n    this.signalPageChange(page);\n  }\n\n  pageDown = () => {\n    var page = this.state.page - 1;\n    if (page <= 0) {\n        page = 1;\n    }\n    this.setState({page: page});\n    this.signalPageChange(page);\n  }\n\n  signalPageChange(page) {\n    // Signal the rows that the owner should display\n    var startRow = ((page - 1) * this.state.maxRecords);\n\n    this.props.pageChange(startRow, startRow + this.state.maxRecords);\n  }\n\n  calculatePages() {\n    // Use the filtered row count when we a query has been entered\n    var length = this.props.displayRows.length;\n\n    var pages = parseInt(length / this.state.maxRecords, 10);\n    if (length % this.state.maxRecords > 0) {\n        pages += 1;\n    }\n\n    return pages;\n  }\n\n  renderPaging() {\n    var pages = this.calculatePages();\n    if (pages > 1) {\n        return (\n            <div className=\"u-float--right spacer\">\n                <button className=\"p-button--neutral small\" href=\"\" onClick={this.pageDown}>&laquo;</button>\n                <span>&nbsp;{this.state.page} of {pages}&nbsp;</span>\n                <button className=\"p-button--neutral small\" href=\"\" onClick={this.pageUp}>&raquo;</button>\n            </div>\n        );\n    } else {\n        return <div className=\"u-float--right\" />;\n    }\n  }\n\n  render() {\n    return (\n        <div className=\"col-12\">\n            {this.renderPaging()}\n        </div>\n    );\n  }\n}\n\nexport default Pagination\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport React, {Component} from 'react';\nimport api from '../models/api';\nimport Pagination from './Pagination';\nimport {LoadingImage} from './Constants';\nimport {T} from './Utils';\nimport filesize from 'filesize'\n\nconst PAGELENGTH = 5;\n\nclass SnapDialogBox extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            snapName: '',\n            snaps: [],\n            loadingSearch: false,\n\n            page: 1,\n            startRow: 0,\n            endRow: PAGELENGTH,\n        };\n    }\n\n    searchStore() {\n        if (this.state.snapName.length===0) {\n            return\n        }\n        this.setState({loadingSearch: true})\n        api.storeSearch(this.state.snapName).then(response => {\n            if ((response.data._embedded) && (response.data._embedded['clickindex:package'])) {\n                this.setState({snaps: response.data._embedded['clickindex:package'], loadingSearch: false, message: null, messageType: null})\n            }\n        })\n    }\n\n    handleSearchChange = (e) => {\n        e.preventDefault()\n        this.setState({snapName: e.target.value})\n    }\n\n    handleKeyPress = (e) => {\n        if (e.key === 'Enter') {\n            this.handleSearchStore(e)\n        }\n    }\n\n    handleSearchStore = (e) => {\n        e.preventDefault()\n        this.searchStore()\n    }\n\n    handleInstall = (e) => {\n        e.preventDefault()\n        var snap = e.target.getAttribute('data-key')\n\n        this.props.handleInstallClick(snap);\n    }\n\n    handleRecordsForPage = (startRow, endRow) => {\n        this.setState({startRow: startRow, endRow: endRow});\n    }\n\n    renderSnaps(snaps) {\n        if (snaps.length > 0) {\n\n            return (\n                <div>\n                    <p>{snaps.length} snaps found</p>\n                    <table>\n                        <tbody>\n                        {snaps.slice(this.state.startRow, this.state.endRow).map(s => {\n                            return (\n                                <tr key={s.snap_id} title={s.description}>\n                                    <td className=\"small\">\n                                        <button data-key={s.package_name} className=\"p-button--neutral small\" title={T(\"install-on-device\")} onClick={this.handleInstall}>\n                                            <i data-key={s.package_name} className=\"fa fa-cloud-upload-alt\" aria-hidden=\"true\" />\n                                        </button>\n                                    </td>\n                                    <td className=\"overflow\">\n                                        <b>{s.package_name}</b> {s.version}\n                                    </td>\n                                    <td className=\"overflow\">\n                                        {s.developer_name} ({filesize(s.binary_filesize)})\n                                    </td>\n                                </tr>\n                            )\n                        })}\n                        </tbody>\n                    </table>\n                </div>\n            )\n        } else {\n            return <div>No snaps found.</div>\n        }\n    }\n\n    render() {\n        var snaps = this.state.snaps\n\n        if (this.props.message) {\n            return (\n                <div className=\"p-card col-4\">\n                    <h3 className=\"p-card__title\">{T('snap-store')}</h3>\n                    <p>\n                        {this.state.loadingSearch ? <img src={LoadingImage} alt={T('loading')} /> : ''}\n                        {this.props.message}\n                    </p>\n                    <p>\n                        <form className=\"p-search-box\">\n                          <input className=\"p-search-box__input\" type=\"search\" name=\"snapname\" onKeyPress={this.handleKeyPress} onChange={this.handleSearchChange} placeholder={T('search-store')} />\n                          <button type=\"reset\" className=\"p-search-box__reset\" alt=\"reset\"><i className=\"p-icon--close\" /></button>\n                          <button type=\"submit\" onClick={this.handleSearchStore} className=\"p-search-box__button\" alt=\"search\"><i className=\"p-icon--search\" /></button>\n                        </form>\n                    </p>\n\n                    <Pagination displayRows={snaps}\n                            pageSize={PAGELENGTH}\n                            pageChange={this.handleRecordsForPage} />\n\n                    {this.renderSnaps(snaps)}\n                    <div>\n                        <button onClick={this.props.handleCancelClick} className=\"p-button--brand\">\n                            {T('close')}\n                        </button>\n                    </div>\n                </div>\n            );\n        } else {\n            return <span />;\n        }\n    }\n}\n\nexport default SnapDialogBox;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react';\nimport moment from 'moment';\nimport api from '../models/api';\nimport SnapDialogBox from './SnapDialogBox';\nimport If from './If';\nimport AlertBox from './AlertBox';\nimport {T} from './Utils';\n\nclass DeviceSnaps extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            message: null,\n            messageType: null,\n            showInstall: false,\n            snapName: '',\n            snapSettings: null,\n            settings: {},\n            hideForm: false,\n        };\n\n    }\n\n    findSnap(name) {\n        return this.props.snaps.filter( s => s.name===name)[0]\n    }\n\n    handleRefreshList = (e) => {\n        e.preventDefault()\n        api.snapsInstallRefresh(this.props.account.orgid, this.props.device).then(response => {\n            this.setState({\n                message: 'Sent request to list snaps',\n                messageType: 'information',\n            })\n        })\n    }\n\n    handleInstall= (e) => {\n        e.preventDefault()\n        this.setState({showInstall: true})\n    }\n\n    handleSnapInstall = (snap) => {\n        api.snapsInstall(this.props.account.orgid, this.props.device, snap).then(response => {\n            this.setState({\n                message: 'Sent request to install snap: ' + snap,\n                messageType: 'information',\n            })\n        })\n    }\n\n    handleSnapOnChange= (e) => {\n        e.preventDefault();\n        this.setState({snapName: e.target.value});\n    }\n\n    handleRefresh = (e) => {\n        e.preventDefault()\n\n        var snap = e.target.getAttribute('data-key')\n        api.snapsUpdate(this.props.account.orgid, this.props.device, snap, 'refresh').then(response => {\n            this.setState({message: 'Sent request to refresh snap: ' + snap, messageType: 'information'});\n        })\n    }\n\n    handleToggle = (e) => {\n        e.preventDefault()\n\n        var snap = e.target.getAttribute('data-key')\n\n        // Check if we need to activate or deactivate the snap\n        var s = this.findSnap(snap)\n        var action = 'enable';\n        if (s.status === 'active') {\n            action = 'disable';\n        }\n\n        api.snapsUpdate(this.props.account.orgid, this.props.device, snap, action).then(response => {\n            this.setState({message: 'Sent request to enable/disable snap: ' + snap, messageType: 'information'});\n        })\n    }\n\n    handleRemove = (e) => {\n        e.preventDefault()\n        var snap = e.target.getAttribute('data-key')\n        api.snapsRemove(this.props.account.orgid, this.props.device, snap).then(response => {\n            this.setState({message: 'Sent request to remove snap: ' + snap, messageType: 'information'});\n        })\n    }\n\n    handleDialogCancel = (e) => {\n        e.preventDefault();\n        this.setState({showInstall: false});\n    }\n\n    handleShowSettings = (e) => {\n        e.preventDefault();\n        var snap = e.target.getAttribute('data-key');\n        if (this.state.snapSettings === snap) {\n            this.setState({snapSettings: null, settings: {}})\n        } else {\n            var s = this.findSnap(snap)\n            if (s.config.length===0) {\n                s.config = '{}'\n            }\n            var settings = JSON.stringify( JSON.parse(s.config), null, 2) // pretty print\n            this.setState({snapSettings: snap, settings: settings})\n        }\n    }\n\n    handleSettingsChange = (e) => {\n        e.preventDefault();\n        this.setState({settings: e.target.value})\n    }\n\n    handleSettingsUpdate = (e) => {\n        e.preventDefault();\n        var snap = e.target.getAttribute('data-key');\n\n        api.snapsSettingsUpdate(this.props.account.orgid, this.props.device, snap, this.state.settings).then(response => {\n            this.setState({snapSettings: null, message: 'Sent request to update snap: ' + snap,\n                    messageType: 'information',\n            })\n        })\n    }\n\n    renderShowInstall() {\n        if (this.state.showInstall) {\n            return (\n                <SnapDialogBox message={T('confirm-snap-install')} \n                    handleTextChange={this.handleSnapOnChange}\n                    handleInstallClick={this.handleSnapInstall} handleCancelClick={this.handleDialogCancel} />\n            );\n        }\n    }\n\n    renderSettings(snap) {\n        if (snap.name !== this.state.snapSettings) {\n            return\n        }\n\n        return (\n            <tr>\n                <td colSpan=\"6\">\n                    <form>\n                        <fieldset>\n                            <label htmlFor={this.state.snapSettings}>\n                                Settings for {this.state.snapSettings}:\n                                <textarea className=\"col-12\" rows=\"4\" value={this.state.settings} data-key={this.state.snapSettings} onChange={this.handleSettingsChange} />\n                            </label>\n                        </fieldset>\n                        <button className=\"p-button--brand\" onClick={this.handleSettingsUpdate} data-key={snap.name}>{T('update')}</button>\n                    </form>\n                </td>\n            </tr>\n        )\n    }\n\n    render () {\n        var tableWidth = '';\n        var hide = '';\n        if (this.state.showInstall) {\n            tableWidth = ' col-8';\n            hide = 'hide';\n        }\n        var d = this.props.device;\n        if (!d.device) {return <div>Loading...</div>};\n\n        return (\n            <div className=\"row\">\n                <h1 className=\"tight\">{d.device.orgid} {d.device.model}</h1>\n                <h4 className=\"subtitle\">{d.device.serial}</h4>\n\n                <section className=\"row spacer\">\n                    <div className=\"col-12\">\n                        <AlertBox message={this.state.message} type={this.state.messageType} />\n                    </div>\n                </section>\n\n                <If cond={!this.state.hideForm}>\n                    <section className=\"row spacer\">\n                        <div className={'p-card' + tableWidth}>\n                            <h3 className=\"p-card__title\">\n                                {T('installed-snaps')}\n\n                                <div className=\"u-float-right\">\n                                    <button onClick={this.handleRefreshList} className=\"p-button--brand\" title={T('refresh-snap-list')}>\n                                        <i className=\"fa fa-sync\" aria-hidden=\"true\" />\n                                    </button>\n                                    <button onClick={this.handleInstall} className=\"p-button--brand\" title={T('install-snap')}>\n                                        <i className=\"fa fa-plus\" aria-hidden=\"true\" />\n                                    </button>\n                                </div>\n                            </h3>\n                            <p title={T('last-update')}>{moment(d.device.lastRefresh).format('llll')}</p>\n\n                            <table className=\"p-card__content\">\n                                <thead>\n                                    <tr>\n                                        <th className={hide} />\n                                        <th className=\"small\">{T('snap')}</th><th className=\"small\">{T('channel')}</th><th>{T('version')}</th><th className=\"xsmall\">{T('status')}</th>\n                                        <th className=\"xsmall\">{T('settings')}</th>\n                                    </tr>\n                                </thead>\n                                {this.props.snaps.map((s) => {\n                                    var c = '';\n                                    if (s.name === this.state.snapSettings) {\n                                        c = 'borderless'\n                                    }\n                                    return (\n                                        <tbody>\n                                        <tr key={s.name} className={c}>\n                                            <td className={hide}>\n                                                <button onClick={this.handleRefresh}  className=\"small u-float\" title={T(\"refresh\")} data-key={s.name}>\n                                                    <i className=\"fa fa-sync\" aria-hidden=\"true\" data-key={s.name} />\n                                                </button>\n                                                <button onClick={this.handleToggle}  className=\"small\" title={T(\"toggle-status\")} data-key={s.name}>\n                                                    <i className=\"fa fa-plug\" aria-hidden=\"true\" data-key={s.name} />\n                                                </button>\n                                                <button onClick={this.handleRemove} className=\"small\" title={T(\"remove\")} data-key={s.name}>\n                                                    <i className=\"fa fa-times\" aria-hidden=\"true\" data-key={s.name} />\n                                                </button>\n                                            </td>\n                                            <td title={s.description}>{s.name}</td>\n                                            <td>{s.channel}</td>\n                                            <td>{s.version}</td>\n                                            <td>{s.status}</td>\n                                            <td>\n                                                <button className=\"p-button--neutral small\" title={T('view-settings')} data-key={s.name} onClick={this.handleShowSettings}>\n                                                    <i className=\"fa fa-sliders-h\" aria-hidden=\"true\" data-key={s.name} />\n                                                </button>\n                                            </td>\n                                        </tr>\n                                        {this.renderSettings(s)}\n                                        </tbody>\n                                    )\n                                })}\n                            </table>\n\n                        </div>\n                        {this.renderShowInstall()}\n                    </section>\n                </If>\n            </div>\n        );\n    }\n}\n\nexport default DeviceSnaps","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport React, {Component} from 'react';\nimport AlertBox from './AlertBox';\nimport {formatError, T} from './Utils';\nimport api from \"../models/api\";\n\nclass Groups extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            name: null,\n            devices: [],\n            devicesExcluded: [],\n        }\n    }\n\n    refresh(orgid, name) {\n        this.getGroupDevices(orgid, name)\n        this.getGroupExcludedDevices(orgid, name)\n    }\n\n    getGroupDevices(orgid, name) {\n        api.groupsGetDevices(orgid, name).then(response => {\n            this.setState({devices: response.data.devices})\n        }).catch(e => {\n            this.setState({message: formatError(e.response.data), devices: []});\n        })\n    }\n\n    getGroupExcludedDevices (orgid, name) {\n        api.groupsGetDevicesExcluded(orgid, name).then(response => {\n            this.setState({devicesExcluded: response.data.devices})\n        }).catch(e => {\n            this.setState({message: formatError(e.response.data), devicesExcluded: []});\n        })\n    }\n\n    handleGroupClick = (e) => {\n        e.preventDefault();\n\n        let selected = e.target.getAttribute('data-key')\n        if (this.state.name === selected) {\n            // Deselect the group\n            this.setState({name: null, devices: [], devicesExcluded: []})\n        } else {\n            // Select the group\n            this.setState({name: selected})\n            this.refresh(this.props.account.orgid, selected)\n        }\n    }\n\n    handleAddToGroup = (e) => {\n        e.preventDefault();\n        let deviceId = e.target.getAttribute('data-key')\n\n        api.groupsDeviceLink(this.props.account.orgid, this.state.name, deviceId).then(response => {\n            this.refresh(this.props.account.orgid, this.state.name)\n        }).catch(e => {\n            this.setState({message: formatError(e.response.data), devicesExcluded: []});\n        })\n    }\n\n    handleRemoveFromGroup = (e) => {\n        e.preventDefault();\n        let deviceId = e.target.getAttribute('data-key')\n\n        api.groupsDeviceUnlink(this.props.account.orgid, this.state.name, deviceId).then(response => {\n            this.refresh(this.props.account.orgid, this.state.name)\n        }).catch(e => {\n            this.setState({message: formatError(e.response.data), devicesExcluded: []});\n        })\n    }\n\n    renderRowsGroups(items) {\n        return items.map((l) => {\n          let selected = (l.name===this.state.name) ? 'p-button--brand' : 'p-button--neutral'\n          return (\n            <tr key={l.name}>\n                <td className=\"overflow\">\n                    <button className={selected} onClick={this.handleGroupClick} data-key={l.name}>{l.name}</button>\n                </td>\n            </tr>\n          );\n        });\n    }\n\n    renderRowsDevices(items, excluded) {\n        return items.map((l) => {\n            return (\n                <tr key={l.deviceId}>\n                    <td className=\"overflow\">\n                        {excluded ? <button onClick={this.handleAddToGroup} data-key={l.deviceId} className=\"p-button--neutral xsmall\"><i data-key={l.deviceId}  className=\"p-icon--plus\" /></button>\n                            : <button onClick={this.handleRemoveFromGroup} data-key={l.deviceId}  className=\"p-button--neutral xsmall\"><i data-key={l.deviceId}  className=\"p-icon--close\" /></button>}\n                            &nbsp;\n                        {l.brand} {l.model} {l.serial}\n                    </td>\n                </tr>\n            );\n        });\n    }\n\n    renderTableGroups(items) {\n        if (!items) {\n            return\n        }\n        if (items.length > 0) {\n            return (\n            <div className=\"col-4\">\n                <table>\n                <thead>\n                    <tr>\n                        <th>{T('groups')}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {this.renderRowsGroups(items)}\n                </tbody>\n                </table>\n            </div>\n            );\n        } else {\n            return (\n            <p>{T('no-groups')}</p>\n            );\n        }\n    }\n\n    renderTableDevices(items) {\n        if (!items) {\n            return\n        }\n        if (items.length > 0) {\n            return (\n                <div className=\"col-4\">\n                    <table>\n                        <thead>\n                        <tr>\n                            <th>{T('devices')}</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {this.renderRowsDevices(items, false)}\n                        </tbody>\n                    </table>\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"col-4\">\n                    <table>\n                        <thead>\n                        <tr>\n                            <th>{T('devices')}</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr><td>{T('no-devices')}</td></tr>\n                        </tbody>\n                    </table>\n                </div>\n            );\n        }\n    }\n\n    renderTableDevicesExcluded(items) {\n        if (!items) {\n            return\n        }\n        if (items.length > 0) {\n            return (\n                <div className=\"col-3\">\n                    <table>\n                        <thead>\n                        <tr>\n                            <th>{T('devices-excluded')}</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {this.renderRowsDevices(items, true)}\n                        </tbody>\n                    </table>\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"col-4\">\n                    <table>\n                        <thead>\n                        <tr>\n                            <th>{T('devices-excluded')}</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr><td>{T('no-devices')}</td></tr>\n                        </tbody>\n                    </table>\n                </div>\n            );\n        }\n    }\n\n    render () {\n        return (\n            <div className=\"row\">\n                <section className=\"row\">\n                    <h2>{T('groups')}</h2>\n                    <div className=\"col-12\">\n                        <AlertBox message={this.props.message} />\n                    </div>\n                </section>\n\n                <section className=\"row spacer\">\n                    {this.renderTableGroups(this.props.groups)}\n                    {this.state.name ?\n                        this.renderTableDevices(this.state.devices) : ''\n                    }\n                    {this.state.name ?\n                        this.renderTableDevicesExcluded(this.state.devicesExcluded) : ''\n                    }\n                </section>\n            </div>\n        )\n    }\n}\n\nexport default Groups\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport React, {Component} from 'react';\nimport AlertBox from './AlertBox';\nimport {formatError, T} from './Utils';\nimport api from \"../models/api\";\n\nclass Actions extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            name: null,\n            groups: [],\n            actions: [],\n        }\n    }\n\n    refresh(orgid, name) {\n    }\n\n    handleGroupClick = (e) => {\n        e.preventDefault();\n\n        let selected = e.target.getAttribute('data-key')\n        if (this.state.name === selected) {\n            // Deselect the group\n            this.setState({name: null, devices: [], devicesExcluded: []})\n        } else {\n            // Select the group\n            this.setState({name: selected})\n            this.refresh(this.props.account.orgid, selected)\n        }\n    }\n\n    renderRowsGroups(items) {\n        return items.map((l) => {\n            let selected = (l.name===this.state.name) ? 'p-button--brand' : 'p-button--neutral'\n            return (\n                <tr key={l.name}>\n                    <td className=\"overflow\">\n                        <button className={selected} onClick={this.handleGroupClick} data-key={l.name}>{l.name}</button>\n                    </td>\n                </tr>\n            );\n        });\n    }\n\n    renderTableGroups(items) {\n        if (!items) {\n            return\n        }\n        if (items.length > 0) {\n            return (\n                <div className=\"col-4\">\n                    <table>\n                        <thead>\n                        <tr>\n                            <th>{T('groups')}</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {this.renderRowsGroups(items)}\n                        </tbody>\n                    </table>\n                </div>\n            );\n        } else {\n            return (\n                <p>{T('no-groups')}</p>\n            );\n        }\n    }\n\n    render () {\n        return (\n            <div className=\"row\">\n                <section className=\"row\">\n                    <h2>{T('groups')}</h2>\n                    <div className=\"col-12\">\n                        <AlertBox message={this.props.message} />\n                    </div>\n                </section>\n\n                <section className=\"row spacer\">\n                    {this.renderTableGroups(this.props.groups)}\n                </section>\n            </div>\n        )\n    }\n}\n\nexport default Actions\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nimport React, {Component} from 'react';\nimport api from '../models/api';\nimport AlertBox from './AlertBox';\nimport {T, formatError, isUserAdmin} from './Utils';\n\nclass GroupEdit extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            title: null,\n            error: null,\n            hideForm: false,\n            nameTo: '',\n        };\n    }\n\n    componentDidMount() {\n\n        if (this.props.name) {\n            this.setTitle('edit-group');\n            this.getGroup(this.props.account.orgid, this.props.name);\n        } else {\n            this.setTitle('new-group');\n        }\n    }\n\n    getGroup(org_id, name) {\n        api.groupsGet(org_id, name).then(response => {\n            this.setState({group: response.data.group, nameTo: response.data.group.name});\n        })\n        .catch((e) => {\n            this.setState({error: formatError(e.response.data), hideForm: true});\n        })\n    }\n\n    setTitle(title) {\n        this.setState({title: T(title)});\n    }\n\n    handleChangeName = (e) => {\n        this.setState({nameTo: e.target.value});\n    }\n\n    handleSaveClick = (e) => {\n        e.preventDefault();\n\n        if (this.props.name) {\n            // Update the existing device\n            api.groupsUpdate(this.props.account.orgid, this.props.name, this.state.nameTo).then(response => {\n                window.location = '/groups';\n            })\n            .catch(e => {\n                this.setState({error: formatError(e.response.data), hideForm: false});\n            })\n        } else {\n            // Create a new device\n            api.groupsCreate(this.props.account.orgid, this.state.nameTo).then(response => {\n                window.location = '/groups';\n            })\n            .catch(e => {\n                this.setState({error: formatError(e.response.data), hideForm: false});\n            })\n        }\n    }\n\n    render () {\n        if (!isUserAdmin(this.props.token)) {\n            return (\n                <div className=\"row\">\n                    <AlertBox message={T('error-no-permissions')} />\n                </div>\n            )\n        }\n\n        if (this.state.hideForm) {\n            return (\n                <div className=\"row\">\n                    <AlertBox message={this.state.error} />\n                </div>\n            )\n        }\n\n        let disabled = this.state.status ? true : false;\n\n        return (\n            <div className=\"row\">\n                <section className=\"row\">\n                    <h2>{this.state.title}</h2>\n\n                    <AlertBox message={this.state.error} />\n\n                    <form>\n                        <fieldset>\n                            <label htmlFor=\"name\">{T('name')}:\n                                <input type=\"text\" id=\"name\" placeholder={T('group-desc')}\n                                       value={this.state.name} onChange={this.handleChangeName} disabled={disabled} />\n                            </label>\n                        </fieldset>\n                    </form>\n\n                    <div>\n                        <a href='/groups' className=\"p-button--neutral\">{T('cancel')}</a>\n                        &nbsp;\n                        <a href='/groups' onClick={this.handleSaveClick} className=\"p-button--brand\">{T('save')}</a>\n                    </div>\n                </section>\n                <br />\n            </div>\n        )\n\n    }\n\n}\n\nexport default GroupEdit;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport React, { Component } from 'react';\nimport {T, isLoggedIn} from './Utils'\nimport AlertBox from './AlertBox'\n\n\nclass Index extends Component {\n\n  constructor(props) {\n\n    super(props)\n    this.state = {\n      token: props.token || {},\n    }\n  }\n\n  renderUser() {\n    if (isLoggedIn(this.props.token)) {\n      return <div />\n    } else {\n      return (\n        <div>\n          <a href=\"/login\" className=\"p-button--brand\">{T('login')}</a>\n        </div>\n      )\n    }\n  }\n\n  renderError() {\n    if (this.props.error) {\n      return (\n        <AlertBox message={T('user-not-found')} />\n      )\n    }\n  }\n\n  render() {\n    return (\n        <div className=\"row\">\n\n\n          <section className=\"row\">\n            <h2>{T('title')}</h2>\n            <h3>{this.props.account.name}</h3>\n            {this.renderError()}\n            <div>\n              <div className=\"p-card\">\n                {T('site-description')}\n              </div>\n            </div>\n          </section>\n\n          <section className=\"row spacer\">\n            {this.renderUser()}\n          </section>\n        </div>\n    );\n  }\n}\n\nexport default Index;","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, { Component } from 'react';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Navigation from './components/Navigation';\nimport AlertBox from './components/AlertBox';\nimport Accounts from './components/Accounts';\nimport AccountEdit from './components/AccountEdit';\nimport Users from './components/Users';\nimport UserEdit from './components/UserEdit';\nimport Device from './components/Device';\nimport Devices from './components/Devices';\nimport Register from './components/Register';\nimport RegisterEdit from './components/RegisterEdit';\nimport DeviceSnaps from './components/DeviceSnaps';\nimport Groups from './components/Groups';\nimport Actions from './components/Actions';\nimport GroupEdit from './components/GroupEdit';\nimport If from './components/If';\nimport Index from './components/Index';\nimport api from './models/api';\nimport {T, isLoggedIn, parseRoute, sectionNavLinks, getAccount, saveAccount, formatError} from './components/Utils'\nimport './sass/App.css'\n\nimport createHistory from 'history/createBrowserHistory'\nconst history = createHistory()\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      location: history.location,\n      token: props.token || {},\n      accounts: [],\n      selectedAccount: getAccount() || {},\n      reg_devices: [],\n      devices: [],\n      groups: [],\n      clients: [],\n      client: {},\n      clientObject: {},\n      snaps: [],\n    }\n\n    history.listen(this.handleNavigation.bind(this))\n    this.getAccounts()\n  }\n\n  handleNavigation(location) {\n    this.setState({ location: location })\n    window.scrollTo(0, 0)\n  }\n\n  getAccounts() {\n    if (isLoggedIn(this.props.token)) {\n        api.accountsList().then(response => {\n            var selectedAccount = this.state.selectedAccount;\n\n            if ((!getAccount().orgid) || (getAccount().orgid==='undefined')) {\n              // Set to the first in the account list\n              if (response.data.organizations.length > 0) {\n                selectedAccount = response.data.organizations[0]\n                saveAccount(selectedAccount)\n              }\n            }\n\n            this.setState({accounts: response.data.organizations, selectedAccount: selectedAccount})\n            this.updateDataForRoute(selectedAccount, false)\n        })\n    }\n  }\n\n  getRegisteredDevices(orgid) {\n    api.clientsList(orgid).then(response => {\n        this.setState({reg_devices: response.data.devices})\n    })\n  }\n\n  getDevices(orgid) {\n    api.devicesList(orgid).then(response => {\n        this.setState({devices: response.data.devices})\n    })\n  }\n\n  getClient (orgid, endpoint) {\n    api.devicesGet(orgid, endpoint).then(response => {\n        this.setState({client: response.data})\n    }).catch(e => {\n        this.setState({message: formatError(e.response.data), client: {}});\n    })\n  }\n\n  getGroups (orgid) {\n    api.groupsList(orgid).then(response => {\n        this.setState({groups: response.data.groups})\n    }).catch(e => {\n        this.setState({message: formatError(e.response.data), groups: []});\n    })\n  }\n\n  getSnaps(orgid, endpoint) {\n    api.snapsList(orgid, endpoint).then(response => {\n        this.setState({snaps: response.data.snaps})\n    })\n    .catch(e => {\n        this.setState({message: formatError(e.response), snaps: []});\n    })\n  }\n\n  // Get the data that's conditional on the route\n  updateDataForRoute(selectedAccount, accountChanged) {\n      const r = parseRoute()\n\n      // Devices and registrations are unique for an account. So changing account may need to trigger a page change\n      if (accountChanged) {\n        // If we are on a clients subsection and the account is changed, navigated to the clients list\n        if ((r.section==='clients') && (r.sectionId)) {\n          window.location = '/clients'\n          return\n        }\n      }\n\n      if(r.section==='register') {this.getRegisteredDevices(selectedAccount.orgid)}\n      if(r.section==='devices') {this.getDevices(selectedAccount.orgid)}\n      if((r.section==='devices') && (r.sectionId)) {this.getClient(selectedAccount.orgid, r.sectionId)}\n      if((r.section==='devices') && (r.sectionId) && (r.subsection==='snaps')) {this.getSnaps(selectedAccount.orgid, r.sectionId)}\n      if(r.section==='groups') {this.getGroups(selectedAccount.orgid)}\n      if(r.section==='actions') {this.getGroups(selectedAccount.orgid)}\n  }\n\n  handleAccountChange = (account) => {\n    saveAccount(account)\n    this.setState({selectedAccount: account})\n\n    this.updateDataForRoute(account, true)\n  }\n\n  renderAccounts(sectionId, subsection) {\n    \n    if (!sectionId) {\n      return <Accounts token={this.props.token} accounts={this.state.accounts} />\n    }\n\n    switch(sectionId) {\n      case 'new':\n        return <AccountEdit token={this.props.token} />\n      default:\n        return <AccountEdit token={this.props.token} id={sectionId} />\n    }\n  }\n\n  renderUsers(sectionId, subsection) {\n\n    if (!sectionId) {\n      return <Users token={this.props.token} />\n    }\n\n    switch(sectionId) {\n      case 'new':\n        return <UserEdit token={this.props.token} />\n      default:\n        return <UserEdit token={this.props.token} username={sectionId} />\n    }\n  }\n\n  renderDevices(sectionId, subsection) {\n    if (!sectionId) {\n      return <Devices token={this.props.token} devices={this.state.devices} account={this.state.selectedAccount} />\n    }\n\n    switch(subsection) {\n      case 'snaps':\n        return <DeviceSnaps token={this.props.token} endpoint={sectionId} account={this.state.selectedAccount}\n                  device={this.state.client} snaps={this.state.snaps} />\n      default:\n        return <Device token={this.props.token} endpoint={sectionId} message={this.state.message}\n                  client={this.state.client} clientObject={this.state.clientObject} account={this.state.selectedAccount} />\n    }\n  }\n\n  renderRegister(sectionId, subsection) {\n    if (!sectionId) {\n        return <Register token={this.props.token} devices={this.state.reg_devices} account={this.state.selectedAccount} />\n    }\n\n    switch(sectionId) {\n      case 'new':\n        return <RegisterEdit token={this.props.token} account={this.state.selectedAccount} />\n      default:\n        return <RegisterEdit token={this.props.token} account={this.state.selectedAccount} id={sectionId} />\n    }\n  }\n\n  renderGroups(sectionId, subsection) {\n\n    if (!sectionId) {\n        return (<Groups token={this.props.token} groups={this.state.groups} account={this.state.selectedAccount} />)\n    }\n\n    switch(sectionId) {\n      case 'new':\n        return <GroupEdit token={this.props.token} account={this.state.selectedAccount} />\n      default:\n        return <GroupEdit token={this.props.token} account={this.state.selectedAccount} name={sectionId} />\n    }\n  }\n\n  renderActions(sectionId, subsection) {\n    if (!sectionId) {\n        return (<Actions token={this.props.token} groups={this.state.groups} account={this.state.selectedAccount} />)\n    }\n\n    // switch(sectionId) {\n    //     case 'new':\n    //         return <GroupEdit token={this.props.token} account={this.state.selectedAccount} />\n    //     default:\n    //         return <GroupEdit token={this.props.token} account={this.state.selectedAccount} name={sectionId} />\n    // }\n  }\n\n  renderSubnav(currentSection, sectionId, subsection) {\n    var l = sectionNavLinks(currentSection, sectionId);\n    if (l) {\n      return (\n        <div className=\"subnav\">\n          <nav className=\"p-navigation__nav p-navigation--light\" role=\"menubar\">\n            <Navigation links={l} section={currentSection} sectionId={sectionId} subsection={subsection} token={this.props.token} />\n          </nav>\n        </div>\n      );\n    } else {\n      return <span />\n    }\n  }\n\n  render() {\n\n    const r = parseRoute()\n    console.log(r)\n    console.log('---account', this.state.selectedAccount)\n\n    return (\n      <div className=\"App\">\n        <Header token={this.props.token} section={r.section}\n          accounts={this.state.accounts} selectedAccount={this.state.selectedAccount}\n          onAccountChange={this.handleAccountChange} />\n\n        <section className=\"p-strip--image is-shallow snapcraft-banner-background\">\n          <div className=\"row\">\n            \n          </div>\n        </section>\n\n        <If cond={isLoggedIn(this.props.token)}>\n          {this.renderSubnav(r.section, r.sectionId, r.subsection)}\n        </If>\n\n        <If cond={isLoggedIn(this.props.token)}>\n          <div className=\"page-content\">\n            {r.section===''? <Index token={this.props.token} account={this.state.selectedAccount} /> : ''}\n            {r.section==='notfound'? <Index token={this.props.token} error /> : ''}\n    \n            {r.section==='devices'? this.renderDevices(r.sectionId, r.subsection) : ''}\n            {r.section==='register'? this.renderRegister(r.sectionId, r.subsection) : ''}\n            {r.section==='groups'? this.renderGroups(r.sectionId, r.subsection) : ''}\n            {r.section==='accounts'? this.renderAccounts(r.sectionId, r.subsection) : ''}\n            {r.section==='users'? this.renderUsers(r.sectionId, r.subsection) : ''}\n            {r.section==='actions'? this.renderActions(r.sectionId, r.subsection) : ''}\n          </div>\n        </If>\n        \n        <If cond={!isLoggedIn(this.props.token)}>\n          <div className=\"page-content\">\n              <div className=\"row\">\n                <AlertBox message={T('error-no-auth')} />\n                <a href=\"/login\" className=\"p-button--brand\">{T('login')}</a>\n              </div>\n          </div>\n        </If>\n\n        <Footer />\n\n      </div>\n    );\n  }\n}\n\n\nexport default App;\n","/*\n * This file is part of the IoT Management Service\n * Copyright 2019 Canonical Ltd.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License version 3, as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,\n * SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport {getAuthToken}      from './components/Utils'\n\ngetAuthToken( (token) => {\n    ReactDOM.render(<App token={token} />, document.getElementById('root'));\n})\n//registerServiceWorker();\n"],"sourceRoot":""}