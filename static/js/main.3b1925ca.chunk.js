(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(57)},49:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(18),c=a.n(r),l=a(1),i=a(2),o=a(4),u=a(3),m=a(5),d=a(9),h={Standard:100,Admin:200,Superuser:300},p={"account-name-desc":"Name of the company","account-code-desc":"Account ID from the Ubuntu Store",accounts:"Accounts",active:"Active",address:"Address",cancel:"Cancel",close:"Close",code:"Code","confirm-snap-install":"Enter the snap to install","confirm-user-delete":"Confirm user deletion",created:"Created","current-time":"Current Time",description:"Description","device-detail":"Device Details","device-name-desc":"Unique name of the device",devices:"Devices","edit-account":"Edit Account","edit-device":"Edit Device Registration","edit-user":"Edit User",email:"Email","error-auth-device":"Invalid device","error-no-auth":"You do not have permissions to access this site. Please login.","error-no-permissions":"You do not have permissions to access this page","error-account-invalid":"Invalid Account","error-user-invalid":"Invalid User","firmware-version":"Firmware Version",groups:"Groups","hardware-version":"Hardware Version",identity:"Identity",info:"Info","install-on-device":"Install on device","install-snap":"Install a snap","installed-snaps":"Installed Snaps",key:"Key","last-update":"Last Update",loading:"Loading...",model:"Model",modified:"Modified",name:"Name","new-account":"Create New Account","new-device":"New Device Registration","new-user":"Create New User","no-accounts":"No accounts registered","no-devices":"No devices registered","no-groups":"No groups registered","no-users":"No users registered",ok:"OK",refresh:"Refresh","reg-date":"Registration Date",register:"Register","register-desc":"Devices must be registered with the account to allow them to connect securely to the MQTT web","register-devices":"Registered Devices",registered:"Registered",remove:"Remove",role:"Role",save:"Save","search-store":"search store for snap",settings:"Settings","serial-number":"Serial Number","site-description":"Manage Ubuntu devices connected via the MQTT protocol.",snap:"Snap","snap-store":"Snap Store",snaps:"Snaps","software-version":"Software Version",status:"Status",summary:"Summary","system-info":"System Information","utc-offset":"UTC Offset",timezone:"Timezone",title:"Device Management Service","toggle-status":"Enable/Disable",update:"Update",uptime:"Uptime","user-email-desc":"Email address of the user","user-not-found":"You do not have permissions to access this site","user-name-desc":"Full name of the user","user-username-desc":"Ubuntu SSO name of the user",username:"Username",users:"Users",version:"Version","view-settings":"View configuration",yes:"Yes"},v=a(19),f=a.n(v),g=a(6),E=a.n(g),b="/v1/";var k={baseUrl:window.location.protocol+"//"+window.location.hostname+":"+window.location.port+b},N={version:function(e,t){return E.a.get(k.baseUrl+"version")},getToken:function(){return E.a.get(k.baseUrl+"token")},getAuthToken:function(){return E.a.get(k.baseUrl+"authtoken")},accountsList:function(e,t){return E.a.get(k.baseUrl+"accounts")},accountsNew:function(e,t){return E.a.post(k.baseUrl+"accounts",e)},accountsGet:function(e,t){return E.a.get(k.baseUrl+"accounts/"+e)},accountsUpdate:function(e,t,a){return E.a.put(k.baseUrl+"accounts/"+e,t)},accountsForUsers:function(e,t){return E.a.get(k.baseUrl+"users/"+e+"/accounts")},accountsUpdateForUser:function(e,t,a){return E.a.post(k.baseUrl+"users/"+e+"/accounts/"+t)},groupsList:function(e,t){return E.a.get(k.baseUrl+e+"/groups")},snapsList:function(e,t,a){return E.a.get(k.baseUrl+e+"/"+t+"/snaps")},snapsRemove:function(e,t,a,n){return E.a.delete(k.baseUrl+"snaps/"+t.device.accountCode+"/"+t.device.name+"/"+t.device.serial+"/"+a)},snapsInstall:function(e,t,a,n){return E.a.post(k.baseUrl+"snaps/"+t.device.accountCode+"/"+t.device.name+"/"+t.device.serial+"/"+a)},snapsUpdate:function(e,t,a,n,s){return E.a.put(k.baseUrl+"snaps/"+t.device.accountCode+"/"+t.device.name+"/"+t.device.serial+"/"+a,n)},snapsSettings:function(e,t,a,n){return E.a.get(k.baseUrl+"snaps/"+t.device.accountCode+"/"+t.device.name+"/"+t.device.serial+"/"+a+"/settings")},snapsSettingsUpdate:function(e,t,a,n,s){return E.a.put(k.baseUrl+"snaps/"+t.device.accountCode+"/"+t.device.name+"/"+t.device.serial+"/"+a+"/settings",n)},storeSearch:function(e,t){return E.a.get(k.baseUrl+"store/snaps/"+e)},clientsList:function(e,t,a){return E.a.get(k.baseUrl+e+"/clients")},clientsDetail:function(e,t,a){return E.a.get(k.baseUrl+e+"/clients/"+t)},clientsDeviceObject:function(e,t,a){return E.a.get(k.baseUrl+e+"/clients/"+t+"/device")},devicesList:function(e,t){return E.a.get(k.baseUrl+e+"/devices")},devicesGet:function(e,t,a){return E.a.get(k.baseUrl+e+"/devices/"+t)},devicesNew:function(e,t,a){return E.a.post(k.baseUrl+e+"/devices",t)},devicesUpdate:function(e,t,a){return E.a.put(k.baseUrl+t.accountCode+"/devices/"+t.id,t)},usersList:function(e,t){return E.a.get(k.baseUrl+"users")},usersNew:function(e,t){return E.a.post(k.baseUrl+"users",e)},usersGet:function(e,t){return E.a.get(k.baseUrl+"users/"+e)},usersUpdate:function(e,t,a){return E.a.put(k.baseUrl+"users/"+e,t)}},y={devices:["info","snaps"]};function w(e){return p[e]||e}function S(){var e=window.location.pathname.split("/");switch(e.length){case 2:return{section:e[1]};case 3:return{section:e[1],sectionId:e[2]};case 4:return{section:e[1],sectionId:e[2],subsection:e[3]};default:return{}}}function C(e){return function(e){return U(h.Standard,e)}(e)}function O(e){return U(h.Admin,e)}function j(e){return U(h.Superuser,e)}function A(e){var t;switch(e){case h.Standard:t="Standard";break;case h.Admin:t="Admin";break;case h.Superuser:t="Superuser";break;default:t="invalid role"}return t}function U(e,t){return!!t&&(!!t.role&&t.role>=e)}function I(e){var t=w(e.error_code);return e.message&&(t+=": "+e.message),t}function D(e){sessionStorage.setItem("accountId",e.id),sessionStorage.setItem("accountCode",e.code),sessionStorage.setItem("accountName",e.name),sessionStorage.setItem("accountActive",e.active)}function _(){return{id:parseInt(sessionStorage.getItem("accountId"),10),code:sessionStorage.getItem("accountCode"),name:sessionStorage.getItem("accountName"),active:"true"===sessionStorage.getItem("accountActive")}}var R=["devices","groups"],F=["devices","groups","accounts"],T=["devices","groups","accounts","users"],x=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"link",value:function(e){return this.props.sectionId?"/"+this.props.section+"/"+this.props.sectionId+"/"+e:"/"+e}},{key:"render",value:function(){var e,t=this,a=this.props.token;if(this.props.links)e=this.props.links;else switch(a.role){case h.Admin:e=F;break;case h.Superuser:e=T;break;case h.Standard:e=R;break;default:e=[]}return s.a.createElement("ul",{className:"p-navigation__links",role:"menu"},e.map(function(e){var a="";return t.props.section!==e&&t.props.subsection!==e||(a=" active"),s.a.createElement("li",{key:e,className:"p-navigation__link"+a,role:"menuitem"},s.a.createElement("a",{href:t.link(e)},w(e)))}))}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).handleAccountChange=function(e){e.preventDefault();var t=parseInt(e.target.value,10),n=a.props.accounts.filter(function(e){return e.id===t})[0];a.props.onAccountChange(n)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"renderAccounts",value:function(e){var t=this;return C(e)&&e.accountFilter?0===this.props.accounts.length?s.a.createElement("span",null):s.a.createElement("li",{className:"p-navigation__link"},s.a.createElement("form",{id:"account-form"},s.a.createElement("select",{value:this.props.selectedAccount.id,onChange:this.handleAccountChange},this.props.accounts.map(function(e){return s.a.createElement("option",{key:e.id,value:e.id,selected:e.id===t.props.selectedAccount.id},e.name)})))):s.a.createElement("span",null)}},{key:"renderUser",value:function(e){return C(e)?e.name?s.a.createElement("li",{className:"p-navigation__link"},s.a.createElement("a",{href:"https://login.ubuntu.com/",className:"p-link--external"},e.name)):void 0:s.a.createElement("li",{className:"p-navigation__link"},s.a.createElement("a",{href:"/login",className:"p-link--external"},w("login")))}},{key:"renderUserLogout",value:function(e){if(C(e))return s.a.createElement("li",{className:"p-navigation__link"},s.a.createElement("a",{href:"/logout"},w("logout")))}},{key:"render",value:function(){var e=this.props.token;return s.a.createElement("ul",{className:"p-navigation__links u-float-right"},this.renderAccounts(e),this.renderUser(e),this.renderUserLogout(e))}}]),t}(n.Component),P=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("header",{className:"p-navigation p-navigation--dark",role:"banner"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"p-navigation__banner"},s.a.createElement("div",{className:"p-navigation__logo"},s.a.createElement("div",{className:"nav_logo"},s.a.createElement("a",{className:"p-navigation__link",href:"/"},s.a.createElement("img",{className:"p-navigation__image",src:"https://assets.ubuntu.com/v1/eb4e0ae3-iotdevice.svg",alt:"IoT Management Service"}),"\xa0",s.a.createElement("h3",null,"IoT Management")))),s.a.createElement("a",{href:"#navigation",className:"p-navigation__toggle--open",title:"menu",onClick:this.handleToggleMenu},s.a.createElement("img",{src:"/static/images/navigation-menu-plain.svg",width:"30px",alt:"menu"})),s.a.createElement("nav",{className:"p-navigation__nav"},s.a.createElement("span",{className:"u-off-screen"},s.a.createElement("a",{href:"#navigation"},"Jump to site")),s.a.createElement(x,{section:this.props.section,token:this.props.token}),s.a.createElement(L,{token:this.props.token,accounts:this.props.accounts,selectedAccount:this.props.selectedAccount,onAccountChange:this.props.onAccountChange})))))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={version:""},a.getVersion(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getVersion",value:function(){var e=this;N.version().then(function(t){e.setState({version:t.data.version})})}},{key:"render",value:function(){return s.a.createElement("footer",{className:"spacer"},s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("small",null,w("version"),": ",this.state.version))))}}]),t}(n.Component),G=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){if(this.props.message){var e="p-notification--";return this.props.type?e+=this.props.type:e+="negative",s.a.createElement("div",{className:e},s.a.createElement("p",{className:"p-notification__response"},this.props.message))}return s.a.createElement("span",null)}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={message:null,accounts:[]},a.getAccounts(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getAccounts",value:function(){var e=this;N.accountsList().then(function(t){e.setState({accounts:t.data.accounts})})}},{key:"renderTable",value:function(e){return e.length>0?s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,w("code")),s.a.createElement("th",null,w("name")),s.a.createElement("th",null,w("active")))),s.a.createElement("tbody",null,this.renderRows(e)))):s.a.createElement("p",null,w("no-accounts"))}},{key:"renderRows",value:function(e){var t=this;return e.map(function(e){var a=j(t.props.token);return s.a.createElement("tr",{key:e.id},s.a.createElement("td",null,a?s.a.createElement("a",{href:"/accounts/"+e.id},e.code):e.code),s.a.createElement("td",null,e.name),s.a.createElement("td",null,e.active?s.a.createElement("i",{className:"fa fa-check"}):s.a.createElement("i",{className:"fa fa-times"})))})}},{key:"render",value:function(){if(!O(this.props.token))return s.a.createElement("div",{className:"row"},s.a.createElement(G,{message:w("error-no-permissions")}));var e=j(this.props.token);return s.a.createElement("div",{className:"row"},s.a.createElement("section",{className:"row"},s.a.createElement("div",null,s.a.createElement("h2",null,w("accounts"),e?s.a.createElement("div",{className:"u-float-right"},s.a.createElement("a",{href:"/accounts/new",className:"p-button--brand",title:w("new-account")},s.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}))):"")),s.a.createElement("div",{className:"col-12"},s.a.createElement(G,{message:this.state.message}))),s.a.createElement("section",{className:"row"},this.renderTable(this.state.accounts)))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChangeCode=function(e){var t=a.state.account;t.code=e.target.value,a.setState({account:t})},a.handleChangeName=function(e){var t=a.state.account;t.name=e.target.value,a.setState({account:t})},a.handleChangeActive=function(e){var t=a.state.account;t.active=e.target.checked,a.setState({account:t})},a.handleSaveClick=function(e){e.preventDefault(),a.props.id?N.accountsUpdate(a.props.id,a.state.account).then(function(e){window.location="/accounts"}).catch(function(e){a.setState({error:I(e.response.data),hideForm:!1})}):N.accountsNew(a.state.account).then(function(e){window.location="/accounts"}).catch(function(e){a.setState({error:I(e.response.data),hideForm:!1})})},a.state={title:null,error:null,hideForm:!1,account:{active:!0}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.id?(this.setTitle("edit-account"),this.getAccount(this.props.id)):this.setTitle("new-account")}},{key:"getAccount",value:function(e){var t=this;N.accountsGet(e).then(function(e){t.setState({account:e.data.account})}).catch(function(e){t.setState({error:I(e.response.data),hideForm:!0})})}},{key:"setTitle",value:function(e){this.setState({title:w(e)})}},{key:"render",value:function(){return j(this.props.token)?this.state.hideForm?s.a.createElement("div",{className:"row"},s.a.createElement(G,{message:this.state.error})):s.a.createElement("div",{className:"row"},s.a.createElement("section",{className:"row"},s.a.createElement("h2",null,this.state.title),s.a.createElement(G,{message:this.state.error}),s.a.createElement("form",null,s.a.createElement("fieldset",null,s.a.createElement("label",{htmlFor:"code"},w("code"),":",s.a.createElement("input",{type:"text",id:"code",placeholder:w("account-code-desc"),value:this.state.account.code,onChange:this.handleChangeCode})),s.a.createElement("label",{htmlFor:"name"},w("name"),":",s.a.createElement("input",{type:"text",id:"name",placeholder:w("account-name-desc"),value:this.state.account.name,onChange:this.handleChangeName})),s.a.createElement("label",{htmlFor:"active"},w("active"),s.a.createElement("input",{type:"checkbox",id:"active",placeholder:w("account-active-desc"),checked:this.state.account.active,onChange:this.handleChangeActive})))),s.a.createElement("div",null,s.a.createElement("a",{href:"/accounts",className:"p-button--neutral"},w("cancel")),"\xa0",s.a.createElement("a",{href:"/accounts",onClick:this.handleSaveClick,className:"p-button--brand"},w("save")))),s.a.createElement("br",null)):s.a.createElement("div",{className:"row"},s.a.createElement(G,{message:w("error-no-permissions")}))}}]),t}(n.Component),V=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.message?s.a.createElement("div",{className:"p-card warning"},s.a.createElement("p",null,this.props.message),s.a.createElement("div",null,s.a.createElement("button",{onClick:this.props.handleCancelClick,className:"p-button--neutral small"},w("cancel")),s.a.createElement("button",{onClick:this.props.handleYesClick,className:"p-button--brand small"},w("ok")))):s.a.createElement("span",null)}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleDelete=function(e){e.preventDefault(),a.setState({confirmDelete:parseInt(e.target.getAttribute("data-key"),10)})},a.handleDeleteUser=function(e){e.preventDefault();var t=a.state.users.filter(function(e){return e.id===a.state.confirmDelete});0!==t.length&&N.deleteUser(t[0]).then(function(e){window.location="/users"}).catch(function(e){a.setState({error:I(e.response.data)})})},a.handleDeleteUserCancel=function(e){e.preventDefault(),a.setState({confirmDelete:null})},a.handleClickAccount=function(e){e.preventDefault();var t=e.target.getAttribute("data-account"),n=parseInt(e.target.getAttribute("data-user"),10),s=e.target.getAttribute("data-username");N.accountsUpdateForUser(n,t).then(function(e){a.getAccountsForUser(s,n)})},a.showAccounts=function(e){e.preventDefault();var t=parseInt(e.target.getAttribute("data-key"),10),n=e.target.getAttribute("data-user");a.state.showAccountsId===t?a.setState({showAccountsId:null}):a.getAccountsForUser(n,t)},a.state={message:null,users:[],accounts:[],confirmDelete:null,showAccountsId:null},a.getUsers(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getUsers",value:function(){var e=this;N.usersList().then(function(t){e.setState({users:t.data.users})})}},{key:"getAccountsForUser",value:function(e,t){var a=this;N.accountsForUsers(e).then(function(e){a.setState({accounts:e.data.accounts,showAccountsId:t})})}},{key:"renderTable",value:function(e){return e.length>0?s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),s.a.createElement("th",null,w("username")),s.a.createElement("th",null,w("name")),s.a.createElement("th",null,w("email")),s.a.createElement("th",null,w("role")),s.a.createElement("th",null,w("accounts")))),this.renderRows(e))):s.a.createElement("p",null,w("no-users"))}},{key:"renderActions",value:function(e){return e.id!==this.state.confirmDelete?s.a.createElement("div",null,s.a.createElement("a",{href:"/users/".concat(e.id),className:"p-button--brand small",title:w("edit-user")},s.a.createElement("i",{className:"fa fa-edit"})),"\xa0",s.a.createElement("button",{onClick:this.handleDelete,"data-key":e.id,className:"p-button--neutral small",title:w("delete-user")},s.a.createElement("i",{className:"fa fa-trash","data-key":e.id}))):s.a.createElement(V,{message:w("confirm-user-delete"),handleYesClick:this.handleDeleteUser,handleCancelClick:this.handleDeleteUserCancel})}},{key:"renderRows",value:function(e){var t=this;return e.map(function(e){var a="";return e.id===t.state.showAccountsId&&(a="borderless"),s.a.createElement("tbody",null,s.a.createElement("tr",{key:e.id,className:a},s.a.createElement("td",null,t.renderActions(e)),s.a.createElement("td",{className:"overflow",title:e.username},e.username),s.a.createElement("td",{className:"overflow",title:e.name},e.name),s.a.createElement("td",{className:"overflow",title:e.email},e.email),s.a.createElement("td",{className:"overflow",title:A(e.role)},A(e.role)),s.a.createElement("td",{className:"overflow"},s.a.createElement("button",{className:"p-button--neutral small",title:w("view-accounts"),"data-key":e.id,"data-user":e.username,onClick:t.showAccounts},s.a.createElement("i",{className:"fa fa-building","aria-hidden":"true","data-key":e.id,"data-user":e.username})))),t.renderAccounts(e))})}},{key:"renderAccounts",value:function(e){var t=this;if(e.id===this.state.showAccountsId){var a,n=this.state.accounts.map(function(n){return a=n.selected?"p-button--brand":"p-button--neutral",s.a.createElement("button",{key:n.code,"data-account":n.id,"data-user":e.id,"data-username":e.username,onClick:t.handleClickAccount,className:a},n.name)});return s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"6"},"Select accounts for ",e.name,":",s.a.createElement("br",null)," ",n))}}},{key:"render",value:function(){return O(this.props.token)?s.a.createElement("div",{className:"row"},s.a.createElement("section",{className:"row"},s.a.createElement("div",null,s.a.createElement("h2",null,w("users"),s.a.createElement("div",{className:"u-float-right"},s.a.createElement("a",{href:"/users/new",className:"p-button--brand",title:w("new-user")},s.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}))))),s.a.createElement("div",{className:"col-12"},s.a.createElement(G,{message:this.state.message}))),s.a.createElement("section",{className:"row"},this.renderTable(this.state.users))):s.a.createElement("div",{className:"row"},s.a.createElement(G,{message:w("error-no-permissions")}))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChangeUsername=function(e){var t=a.state.user;t.username=e.target.value,a.setState({user:t})},a.handleChangeName=function(e){var t=a.state.user;t.name=e.target.value,a.setState({user:t})},a.handleChangeEmail=function(e){var t=a.state.user;t.email=e.target.value,a.setState({user:t})},a.handleChangeRole=function(e){var t=a.state.user;t.role=parseInt(e.target.value,10),a.setState({user:t})},a.handleSaveClick=function(e){e.preventDefault(),a.props.id?N.usersUpdate(a.props.id,a.state.user).then(function(e){window.location="/users"}).catch(function(e){a.setState({error:I(e.response.data),hideForm:!1})}):N.usersNew(a.state.user).then(function(e){window.location="/users"}).catch(function(e){a.setState({error:I(e.response.data),hideForm:!1})})},a.state={title:null,user:{},error:null,hideForm:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.id?(this.setTitle("edit-user"),this.getUser(this.props.id)):this.setTitle("new-user")}},{key:"setTitle",value:function(e){this.setState({title:w(e)})}},{key:"getUser",value:function(e){var t=this;N.usersGet(e).then(function(e){t.setState({user:e.data.user,hideForm:!1})}).catch(function(e){t.setState({error:I(e.response.data)})})}},{key:"renderError",value:function(){if(this.state.error)return s.a.createElement(G,{message:this.state.error})}},{key:"render",value:function(){return j(this.props.token)?this.state.hideForm?s.a.createElement("div",{className:"row"},s.a.createElement(G,{message:this.state.error})):s.a.createElement("div",{className:"row"},s.a.createElement("section",{className:"row"},s.a.createElement("h2",null,this.state.title),s.a.createElement(G,{message:this.state.error}),s.a.createElement("form",null,s.a.createElement("fieldset",null,s.a.createElement("label",{htmlFor:"username"},w("username"),":",s.a.createElement("input",{type:"text",id:"username",placeholder:w("user-username-desc"),value:this.state.user.username,onChange:this.handleChangeUsername})),s.a.createElement("label",{htmlFor:"name"},w("name"),":",s.a.createElement("input",{type:"text",id:"name",placeholder:w("user-name-desc"),value:this.state.user.name,onChange:this.handleChangeName})),s.a.createElement("label",{htmlFor:"email"},w("email"),":",s.a.createElement("input",{type:"text",id:"email",placeholder:w("user-email-desc"),value:this.state.user.email,onChange:this.handleChangeEmail})),s.a.createElement("label",{htmlFor:"role"},w("role"),":",s.a.createElement("select",{value:this.state.user.role,id:"role",onChange:this.handleChangeRole},s.a.createElement("option",null),s.a.createElement("option",{key:"standard",value:"100"},"Standard"),s.a.createElement("option",{key:"admin",value:"200"},"Admin"),s.a.createElement("option",{key:"superuser",value:"300"},"Superuser"))))),s.a.createElement("div",null,s.a.createElement("a",{href:"/users",className:"p-button--neutral"},w("cancel")),"\xa0",s.a.createElement("a",{href:"/users",onClick:this.handleSaveClick,className:"p-button--brand"},w("save")))),s.a.createElement("br",null)):s.a.createElement("div",{className:"row"},s.a.createElement(G,{message:w("error-no-permissions")}))}}]),t}(n.Component),K=a(8),Q=a.n(K);function B(e){var t=e.cond,a=e.children;return t?Array.isArray(a)?s.a.createElement("div",null,a):a:null}var H,W=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.client;return e.info?s.a.createElement("div",{className:"row"},s.a.createElement("h1",{className:"tight"},e.device.accountCode," ",e.device.name),s.a.createElement("h4",{className:"subtitle"},e.device.serial),s.a.createElement("section",{className:"row spacer"},s.a.createElement("div",{className:"col-12"},s.a.createElement(G,{message:this.props.message}))),s.a.createElement(B,{cond:!this.props.message},s.a.createElement("section",{className:"row spacer"},s.a.createElement("div",{className:"p-card--highlighted col-6"},s.a.createElement("table",{className:"p-card__content"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,w("last-update"),":"),s.a.createElement("td",null,Q()(e.device.lastRefresh).format("llll"))),s.a.createElement("tr",null,s.a.createElement("td",null,w("registered"),":"),s.a.createElement("td",null,Q()(e.device.created).format("llll"))))))),s.a.createElement("section",{className:"row spacer"},s.a.createElement("div",{className:"p-card"},s.a.createElement("h3",{className:"p-card__title"},w("system-info")),s.a.createElement("table",{className:"p-card__content"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,w("model"),":"),s.a.createElement("td",null,e.device.accountCode," ",e.device.name)),s.a.createElement("tr",null,s.a.createElement("td",null,w("serial-number"),":"),s.a.createElement("td",null,e.device.serial)),s.a.createElement("tr",null,s.a.createElement("td",null,w("software-version"),":"),s.a.createElement("td",null,e.info.softwareversion)),s.a.createElement("tr",null,s.a.createElement("td",null,w("firmware-version"),":"),s.a.createElement("td",null,e.info.firmwareversion)),s.a.createElement("tr",null,s.a.createElement("td",null,w("current-time"),":"),s.a.createElement("td",null,e.info.currenttime)),s.a.createElement("tr",null,s.a.createElement("td",null,w("utc-offset"),":"),s.a.createElement("td",null,e.info.utcoffset)),s.a.createElement("tr",null,s.a.createElement("td",null,w("timezone"),":"),s.a.createElement("td",null,e.info.timezone)),s.a.createElement("tr",null,s.a.createElement("td",null,w("uptime"),":"),s.a.createElement("td",null,e.info.uptime)))))))):s.a.createElement("div",null,"Loading...")}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={message:null},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getAge",value:function(e){var t=Q()(e),a=Q()(),n=Q.a.duration(a.diff(t)).asMinutes();return n<2?s.a.createElement("i",{className:"fa fa-clock led-green",title:t.format("llll")}):n<5?s.a.createElement("i",{className:"fa fa-clock led-orange",title:t.format("llll")}):s.a.createElement("i",{className:"fa fa-clock led-red",title:t.format("llll")})}},{key:"renderTable",value:function(e){if(e)return e.length>0?s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,w("account")),s.a.createElement("th",null,w("model")),s.a.createElement("th",null,w("serial")),s.a.createElement("th",{className:"xsmall"},w("status")))),s.a.createElement("tbody",null,this.renderRows(e)))):s.a.createElement("p",null,w("no-devices"))}},{key:"renderRows",value:function(e){var t=this;return e.map(function(e){return s.a.createElement("tr",{key:e.registrationId},s.a.createElement("td",{className:"overflow"},s.a.createElement("a",{href:"/devices/"+e.id+"/info"},e.accountCode)),s.a.createElement("td",{className:"overflow"},s.a.createElement("a",{href:"/devices/"+e.id+"/info"},e.name)),s.a.createElement("td",{className:"overflow"},s.a.createElement("a",{href:"/devices/"+e.id+"/info"},e.serial)),s.a.createElement("td",null,t.getAge(e.lastRefresh)))})}},{key:"render",value:function(){return s.a.createElement("div",{className:"row"},s.a.createElement("section",{className:"row"},s.a.createElement("h2",null,w("register-devices")),s.a.createElement("div",{className:"col-12"},s.a.createElement(G,{message:this.state.message}))),s.a.createElement("section",{className:"row spacer"},this.renderTable(this.props.devices)))}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChangeName=function(e){var t=a.state.device;t.name=e.target.value,a.setState({device:t})},a.handleChangeActive=function(e){var t=a.state.device;t.active=e.target.checked,a.setState({device:t})},a.handleSaveClick=function(e){e.preventDefault(),a.props.id?N.devicesUpdate(a.props.account.code,a.state.device).then(function(e){window.location="/devices"}).catch(function(e){a.setState({error:I(e.response.data),hideForm:!1})}):N.devicesNew(a.props.account.code,a.state.device).then(function(e){window.location="/devices"}).catch(function(e){a.setState({error:I(e.response.data),hideForm:!1})})},a.state={title:null,error:null,hideForm:!1,device:{active:!0}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.id?(this.setTitle("edit-device"),this.getDevice(this.props.id)):this.setTitle("new-device")}},{key:"getDevice",value:function(e){var t=this;N.devicesGet(this.props.account.code,e).then(function(e){t.setState({device:e.data.device})}).catch(function(e){t.setState({error:I(e.response.data),hideForm:!0})})}},{key:"setTitle",value:function(e){this.setState({title:w(e)})}},{key:"render",value:function(){return O(this.props.token)?this.state.hideForm?s.a.createElement("div",{className:"row"},s.a.createElement(G,{message:this.state.error})):s.a.createElement("div",{className:"row"},s.a.createElement("section",{className:"row"},s.a.createElement("h2",null,this.state.title),s.a.createElement(G,{message:this.state.error}),s.a.createElement("form",null,s.a.createElement("fieldset",null,s.a.createElement("label",{htmlFor:"name"},w("name"),":",s.a.createElement("input",{type:"text",id:"name",placeholder:w("device-name-desc"),value:this.state.device.name,onChange:this.handleChangeName})),s.a.createElement("label",{htmlFor:"active"},w("active"),s.a.createElement("input",{type:"checkbox",id:"active",checked:this.state.device.active,onChange:this.handleChangeActive})))),s.a.createElement("div",null,s.a.createElement("a",{href:"/devices",className:"p-button--neutral"},w("cancel")),"\xa0",s.a.createElement("a",{href:"/devices",onClick:this.handleSaveClick,className:"p-button--brand"},w("save")))),s.a.createElement("br",null)):s.a.createElement("div",{className:"row"},s.a.createElement(G,{message:w("error-no-permissions")}))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).pageUp=function(){var e=a.calculatePages(),t=a.state.page+1;t>e&&(t=e),a.setState({page:t}),a.signalPageChange(t)},a.pageDown=function(){var e=a.state.page-1;e<=0&&(e=1),a.setState({page:e}),a.signalPageChange(e)},a.state={page:1,query:null,maxRecords:5|e.pageSize},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"signalPageChange",value:function(e){var t=(e-1)*this.state.maxRecords;this.props.pageChange(t,t+this.state.maxRecords)}},{key:"calculatePages",value:function(){var e=this.props.displayRows.length,t=parseInt(e/this.state.maxRecords,10);return e%this.state.maxRecords>0&&(t+=1),t}},{key:"renderPaging",value:function(){var e=this.calculatePages();return e>1?s.a.createElement("div",{className:"u-float--right spacer"},s.a.createElement("button",{className:"p-button--neutral small",href:"",onClick:this.pageDown},"\xab"),s.a.createElement("span",null,"\xa0",this.state.page," of ",e,"\xa0"),s.a.createElement("button",{className:"p-button--neutral small",href:"",onClick:this.pageUp},"\xbb")):s.a.createElement("div",{className:"u-float--right"})}},{key:"render",value:function(){return s.a.createElement("div",{className:"col-12"},this.renderPaging())}}]),t}(n.Component),ee=a(20),te=a.n(ee),ae=5,ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleSearchChange=function(e){e.preventDefault(),a.setState({snapName:e.target.value})},a.handleKeyPress=function(e){"Enter"===e.key&&a.handleSearchStore(e)},a.handleSearchStore=function(e){e.preventDefault(),a.searchStore()},a.handleInstall=function(e){e.preventDefault();var t=e.target.getAttribute("data-key");a.props.handleInstallClick(t)},a.handleRecordsForPage=function(e,t){a.setState({startRow:e,endRow:t})},a.state={snapName:"",snaps:[],loadingSearch:!1,page:1,startRow:0,endRow:ae},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"searchStore",value:function(){var e=this;0!==this.state.snapName.length&&(this.setState({loadingSearch:!0}),N.storeSearch(this.state.snapName).then(function(t){t.data._embedded&&t.data._embedded["clickindex:package"]&&e.setState({snaps:t.data._embedded["clickindex:package"],loadingSearch:!1,message:null,messageType:null})}))}},{key:"renderSnaps",value:function(e){var t=this;return e.length>0?s.a.createElement("div",null,s.a.createElement("p",null,e.length," snaps found"),s.a.createElement("table",null,s.a.createElement("tbody",null,e.slice(this.state.startRow,this.state.endRow).map(function(e){return s.a.createElement("tr",{key:e.snap_id,title:e.description},s.a.createElement("td",{className:"small"},s.a.createElement("button",{"data-key":e.package_name,className:"p-button--neutral small",title:w("install-on-device"),onClick:t.handleInstall},s.a.createElement("i",{"data-key":e.package_name,className:"fa fa-cloud-upload-alt","aria-hidden":"true"}))),s.a.createElement("td",{className:"overflow"},s.a.createElement("b",null,e.package_name)," ",e.version),s.a.createElement("td",{className:"overflow"},e.developer_name," (",te()(e.binary_filesize),")"))})))):s.a.createElement("div",null,"No snaps found.")}},{key:"render",value:function(){var e=this.state.snaps;return this.props.message?s.a.createElement("div",{className:"p-card col-4"},s.a.createElement("h3",{className:"p-card__title"},w("snap-store")),s.a.createElement("p",null,this.state.loadingSearch?s.a.createElement("img",{src:"/static/images/ajax-loader.gif",alt:w("loading")}):"",this.props.message),s.a.createElement("p",null,s.a.createElement("form",{className:"p-search-box"},s.a.createElement("input",{className:"p-search-box__input",type:"search",name:"snapname",onKeyPress:this.handleKeyPress,onChange:this.handleSearchChange,placeholder:w("search-store")}),s.a.createElement("button",{type:"reset",className:"p-search-box__reset",alt:"reset"},s.a.createElement("i",{className:"p-icon--close"})),s.a.createElement("button",{type:"submit",onClick:this.handleSearchStore,className:"p-search-box__button",alt:"search"},s.a.createElement("i",{className:"p-icon--search"})))),s.a.createElement($,{displayRows:e,pageSize:ae,pageChange:this.handleRecordsForPage}),this.renderSnaps(e),s.a.createElement("div",null,s.a.createElement("button",{onClick:this.props.handleCancelClick,className:"p-button--brand"},w("close")))):s.a.createElement("span",null)}}]),t}(n.Component),se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleRefreshList=function(e){e.preventDefault(),window.location.reload()},a.handleInstall=function(e){e.preventDefault(),a.setState({showInstall:!0})},a.handleSnapInstall=function(e){N.snapsInstall(a.props.account.code,a.props.device,e).then(function(t){a.setState({message:"Sent request to install snap: "+e,messageType:"information"})})},a.handleSnapOnChange=function(e){e.preventDefault(),a.setState({snapName:e.target.value})},a.handleRefresh=function(e){e.preventDefault();var t=e.target.getAttribute("data-key");N.snapsUpdate(a.props.account.code,a.props.device,t,"refresh").then(function(e){a.setState({message:"Sent request to refresh snap: "+t,messageType:"information"})})},a.handleToggle=function(e){e.preventDefault();var t=e.target.getAttribute("data-key"),n="enable";"active"===a.findSnap(t).status&&(n="disable"),N.snapsUpdate(a.props.account.code,a.props.device,t,n).then(function(e){a.setState({message:"Sent request to enable/disable snap: "+t,messageType:"information"})})},a.handleRemove=function(e){e.preventDefault();var t=e.target.getAttribute("data-key");N.snapsRemove(a.props.account.code,a.props.device,t).then(function(e){a.setState({message:"Sent request to remove snap: "+t,messageType:"information"})})},a.handleDialogCancel=function(e){e.preventDefault(),a.setState({showInstall:!1})},a.handleShowSettings=function(e){e.preventDefault();var t=e.target.getAttribute("data-key");if(a.state.snapSettings===t)a.setState({snapSettings:null,settings:{}});else{var n=a.findSnap(t),s=JSON.stringify(JSON.parse(n.config),null,2);a.setState({snapSettings:t,settings:s})}},a.handleSettingsChange=function(e){e.preventDefault(),a.setState({settings:e.target.value})},a.handleSettingsUpdate=function(e){e.preventDefault();var t=e.target.getAttribute("data-key");N.snapsSettingsUpdate(a.props.account.code,a.props.device,t,a.state.settings).then(function(e){a.setState({snapSettings:null,message:"Sent request to update snap: "+t,messageType:"information"})})},a.state={message:null,messageType:null,showInstall:!1,snapName:"",snapSettings:null,settings:{},hideForm:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"findSnap",value:function(e){return this.props.snaps.filter(function(t){return t.name===e})[0]}},{key:"renderShowInstall",value:function(){if(this.state.showInstall)return s.a.createElement(ne,{message:w("confirm-snap-install"),handleTextChange:this.handleSnapOnChange,handleInstallClick:this.handleSnapInstall,handleCancelClick:this.handleDialogCancel})}},{key:"renderSettings",value:function(e){if(e.name===this.state.snapSettings)return s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"6"},s.a.createElement("form",null,s.a.createElement("fieldset",null,s.a.createElement("label",{htmlFor:this.state.snapSettings},"Settings for ",this.state.snapSettings,":",s.a.createElement("textarea",{className:"col-12",rows:"4",value:this.state.settings,"data-key":this.state.snapSettings,onChange:this.handleSettingsChange}))),s.a.createElement("button",{className:"p-button--brand",onClick:this.handleSettingsUpdate,"data-key":e.name},w("update")))))}},{key:"render",value:function(){var e=this,t="",a="";this.state.showInstall&&(t=" col-8",a="hide");var n=this.props.device;return n.info?s.a.createElement("div",{className:"row"},s.a.createElement("h1",{className:"tight"},n.device.accountCode," ",n.device.name),s.a.createElement("h4",{className:"subtitle"},n.device.serial),s.a.createElement("section",{className:"row spacer"},s.a.createElement("div",{className:"col-12"},s.a.createElement(G,{message:this.state.message,type:this.state.messageType}))),s.a.createElement(B,{cond:!this.state.hideForm},s.a.createElement("section",{className:"row spacer"},s.a.createElement("div",{className:"p-card"+t},s.a.createElement("h3",{className:"p-card__title"},w("installed-snaps"),s.a.createElement("div",{className:"u-float-right"},s.a.createElement("button",{onClick:this.handleRefreshList,className:"p-button--brand",title:w("refresh-snap-list")},s.a.createElement("i",{className:"fa fa-sync","aria-hidden":"true"})),s.a.createElement("button",{onClick:this.handleInstall,className:"p-button--brand",title:w("install-snap")},s.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})))),s.a.createElement("p",{title:w("last-update")},Q()(n.device.lastRefresh).format("llll")),s.a.createElement("table",{className:"p-card__content"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:a}),s.a.createElement("th",{className:"small"},w("snap")),s.a.createElement("th",{className:"xsmall"},w("version")),s.a.createElement("th",null,w("summary")),s.a.createElement("th",{className:"xsmall"},w("status")),s.a.createElement("th",{className:"xsmall"},w("settings")))),this.props.snaps.map(function(t){var n="";return t.name===e.state.snapSettings&&(n="borderless"),s.a.createElement("tbody",null,s.a.createElement("tr",{key:t.name,className:n},s.a.createElement("td",{className:a},s.a.createElement("button",{onClick:e.handleRefresh,className:"small u-float",title:w("refresh"),"data-key":t.name},s.a.createElement("i",{className:"fa fa-sync","aria-hidden":"true","data-key":t.name})),s.a.createElement("button",{onClick:e.handleToggle,className:"small",title:w("toggle-status"),"data-key":t.name},s.a.createElement("i",{className:"fa fa-plug","aria-hidden":"true","data-key":t.name})),s.a.createElement("button",{onClick:e.handleRemove,className:"small",title:w("remove"),"data-key":t.name},s.a.createElement("i",{className:"fa fa-times","aria-hidden":"true","data-key":t.name}))),s.a.createElement("td",{title:t.description},t.name),s.a.createElement("td",null,t.version),s.a.createElement("td",null,t.summary),s.a.createElement("td",null,t.status),s.a.createElement("td",null,s.a.createElement("button",{className:"p-button--neutral small",title:w("view-settings"),"data-key":t.name,onClick:e.handleShowSettings},s.a.createElement("i",{className:"fa fa-sliders-h","aria-hidden":"true","data-key":t.name})))),e.renderSettings(t))}))),this.renderShowInstall()))):s.a.createElement("div",null,"Loading...")}}]),t}(n.Component),re=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"renderRows",value:function(e){return e.map(function(e){return console.log(e),s.a.createElement("tr",{key:e.id},s.a.createElement("td",{className:"overflow"},s.a.createElement("button",null,e.name)))})}},{key:"renderTable",value:function(e){if(e)return e.length>0?s.a.createElement("div",{className:"col-3"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,w("name")))),s.a.createElement("tbody",null,this.renderRows(e)))):s.a.createElement("p",null,w("no-groups"))}},{key:"render",value:function(){return s.a.createElement("div",{className:"row"},s.a.createElement("section",{className:"row"},s.a.createElement("h2",null,w("groups")),s.a.createElement("div",{className:"col-12"},s.a.createElement(G,{message:this.props.message}))),s.a.createElement("section",{className:"row spacer"},this.renderTable(this.props.groups)))}}]),t}(n.Component),ce=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={token:e.token||{}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"renderUser",value:function(){return C(this.props.token)?s.a.createElement("div",null):s.a.createElement("div",null,s.a.createElement("a",{href:"/login",className:"p-button--brand"},w("login")))}},{key:"renderError",value:function(){if(this.props.error)return s.a.createElement(G,{message:w("user-not-found")})}},{key:"render",value:function(){return s.a.createElement("div",{className:"row"},s.a.createElement("section",{className:"row"},s.a.createElement("h2",null,w("title")),s.a.createElement("h3",null,this.props.account.name),this.renderError(),s.a.createElement("div",null,s.a.createElement("div",{className:"p-card"},w("site-description")))),s.a.createElement("section",{className:"row spacer"},this.renderUser()))}}]),t}(n.Component),le=(a(49),a(21)),ie=a.n(le)()(),oe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleAccountChange=function(e){D(e),a.setState({selectedAccount:e}),a.updateDataForRoute(e,!0)},a.state={location:ie.location,token:e.token||{},accounts:[],selectedAccount:_()||{},devices:[],groups:[],clients:[],client:{},clientObject:{},snaps:[]},ie.listen(a.handleNavigation.bind(Object(d.a)(Object(d.a)(a)))),a.getAccounts(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleNavigation",value:function(e){this.setState({location:e}),window.scrollTo(0,0)}},{key:"getAccounts",value:function(){var e=this;C(this.props.token)&&N.accountsList().then(function(t){var a=e.state.selectedAccount;e.props.token.accountFilter||(a={code:"all"}),e.state.selectedAccount.code||_().code||!e.props.token.accountFilter||t.data.accounts.length>0&&D(a=t.data.accounts[0]),e.setState({accounts:t.data.accounts,selectedAccount:a}),e.updateDataForRoute(a,!1)})}},{key:"getDevices",value:function(e){var t=this;N.devicesList(e).then(function(e){t.setState({devices:e.data.devices})})}},{key:"getClient",value:function(e,t){var a=this;N.clientsDetail(e,t).then(function(e){a.setState({client:e.data})}).catch(function(e){a.setState({message:I(e.response.data),client:{}})})}},{key:"getGroups",value:function(e){var t=this;N.groupsList(e).then(function(e){t.setState({groups:e.data.groups})}).catch(function(e){t.setState({message:I(e.response.data),clients:[]})})}},{key:"getSnaps",value:function(e,t){var a=this;N.snapsList(e,t).then(function(e){a.setState({snaps:e.data.snaps})}).catch(function(e){a.setState({message:I(e.response),snaps:[]})})}},{key:"updateDataForRoute",value:function(e,t){var a=S();t&&"clients"===a.section&&a.sectionId?window.location="/clients":("devices"===a.section&&this.getDevices(e.code),"devices"===a.section&&a.sectionId&&this.getClient(e.code,a.sectionId),"devices"===a.section&&a.sectionId&&"snaps"===a.subsection&&this.getSnaps(e.code,a.sectionId),"groups"===a.section&&this.getGroups(e.code))}},{key:"renderAccounts",value:function(e,t){if(!e)return s.a.createElement(z,{token:this.props.token});switch(e){case"new":return s.a.createElement(q,{token:this.props.token});default:return s.a.createElement(q,{token:this.props.token,id:e})}}},{key:"renderUsers",value:function(e,t){if(!e)return s.a.createElement(Y,{token:this.props.token});switch(e){case"new":return s.a.createElement(J,{token:this.props.token});default:return s.a.createElement(J,{token:this.props.token,id:e})}}},{key:"renderDevices",value:function(e,t){if(!e)return s.a.createElement(X,{token:this.props.token,devices:this.state.devices,account:this.state.selectedAccount});switch(t){case"snaps":return s.a.createElement(se,{token:this.props.token,endpoint:e,account:this.state.selectedAccount,device:this.state.client,snaps:this.state.snaps});default:return s.a.createElement(W,{token:this.props.token,endpoint:e,message:this.state.message,client:this.state.client,clientObject:this.state.clientObject,account:this.state.selectedAccount})}}},{key:"renderRegister",value:function(e,t){if(!e)return s.a.createElement(X,{token:this.props.token,devices:this.state.devices,account:this.state.selectedAccount});switch(e){case"new":return s.a.createElement(Z,{token:this.props.token,account:this.state.selectedAccount});default:return s.a.createElement(Z,{token:this.props.token,account:this.state.selectedAccount,id:e})}}},{key:"renderGroups",value:function(e,t){if(!e)return s.a.createElement(re,{token:this.props.token,groups:this.state.groups,account:this.state.selectedAccount})}},{key:"renderSubnav",value:function(e,t,a){var n=function(e,t){if(""!==e&&("devices"!==e||t))return y[e]}(e,t);return n?s.a.createElement("div",{className:"subnav"},s.a.createElement("nav",{className:"p-navigation__nav p-navigation--light",role:"menubar"},s.a.createElement(x,{links:n,section:e,sectionId:t,subsection:a,token:this.props.token}))):s.a.createElement("span",null)}},{key:"render",value:function(){var e=S();return console.log(e),console.log("---account",this.state.selectedAccount),s.a.createElement("div",{className:"App"},s.a.createElement(P,{token:this.props.token,section:e.section,accounts:this.state.accounts,selectedAccount:this.state.selectedAccount,onAccountChange:this.handleAccountChange}),s.a.createElement("section",{className:"p-strip--image is-shallow snapcraft-banner-background"},s.a.createElement("div",{className:"row"})),s.a.createElement(B,{cond:C(this.props.token)},this.renderSubnav(e.section,e.sectionId,e.subsection)),s.a.createElement(B,{cond:C(this.props.token)},s.a.createElement("div",{className:"page-content"},""===e.section?s.a.createElement(ce,{token:this.props.token,account:this.state.selectedAccount}):"","notfound"===e.section?s.a.createElement(ce,{token:this.props.token,error:!0}):"","devices"===e.section?this.renderDevices(e.sectionId,e.subsection):"","register"===e.section?this.renderRegister(e.sectionId,e.subsection):"","groups"===e.section?this.renderGroups(e.sectionId,e.subsection):"","accounts"===e.section?this.renderAccounts(e.sectionId,e.subsection):"","users"===e.section?this.renderUsers(e.sectionId,e.subsection):"")),s.a.createElement(B,{cond:!C(this.props.token)},s.a.createElement("div",{className:"page-content"},s.a.createElement("div",{className:"row"},s.a.createElement(G,{message:w("error-no-auth")}),s.a.createElement("a",{href:"/login",className:"p-button--brand"},w("login"))))),s.a.createElement(M,null))}}]),t}(n.Component);H=function(e){c.a.render(s.a.createElement(oe,{token:e}),document.getElementById("root"))},N.getAuthToken().then(function(e){var t=e.headers.authorization;if(t){var a=f()(t);console.log("---token:",a),H(a||{})}else H({})})}},[[22,1,2]]]);
//# sourceMappingURL=main.3b1925ca.chunk.js.map